import{c as B,w as I}from"./index-32d6febb.js";import{F as p}from"./index-4042c46c.js";import{r as A,h as W,ar as H,E as $,F as O,q as x,o as n,k as V,p as s,P as g,z as t,Z as c,Y as S,O as b,W as d,V as C,m as E}from"./vue-69ad5a16.js";const J="/admin/cms.Config/";function K(){return B({url:J+"param",method:"get"})}const i=A({typeOptions:{},optionGroup:[{label:"common",options:[]},{label:"base",options:[]},{label:"senior",options:[]}],types:[],uploadAllowFormat:{file:[],image:[]},customDefalut:{}}),M=()=>{const v=localStorage.getItem("cmsParam");if(!v)K().then(m=>{m.code===1&&(localStorage.setItem("cmsParam",JSON.stringify(m.data)),M())});else{const m=JSON.parse(v);i.typeOptions=m.typeOptions,console.log(i.typeOptions),i.uploadAllowFormat=m.uploadAllowFormat,i.types=[];for(const f in i.optionGroup)i.optionGroup[f].options=[];i.customDefalut={};for(const f in i.typeOptions){const u=i.typeOptions[f];u.group=="common"&&i.optionGroup[0].options.push({label:u.label,value:u.value}),u.group=="base"&&i.optionGroup[1].options.push({label:u.label,value:u.value}),u.group=="senior"&&i.optionGroup[2].options.push({label:u.label,value:u.value}),i.types.push(u.value),i.customDefalut[f]=u.setup}}},j={style:{"text-align":"center","margin-bottom":"10px"}},Z=W({__name:"customField",setup(v){const m=H("baTable"),f=function(r){return r.reduce((l,y)=>({...l,[y]:y}),{})},u=A({setting:[],uploadAllowFormat:{image:[],file:[]}}),e=A({setup:m.form.items.setup,customDefalut:{}}),D=function(r){e.setup.type=="key"&&(r.key=e.setup.options.length,console.log(r.key)),e.setup.options.push(r)},T=function(r){e.setup.options.splice(r,1)};let F;const z=r=>{let l={};if(r in e.customDefalut)if(u.setting=i.typeOptions[r].setting||[],F=e.customDefalut[r],!e.setup)l=F;else for(const y in F)l[y]=e.setup[y]?e.setup[y]:F[y];e.setup=l,m.form.items.setup=l};$(()=>{M(),e.customDefalut=i.customDefalut,u.uploadAllowFormat=i.uploadAllowFormat,z(m.form.items.type)}),O(()=>m.form.items.type,r=>{z(r)}),O(e.setup,r=>{console.log(r),m.form.items.setup=r});const{t:a}=I();return(r,l)=>{const y=x("el-option"),h=x("el-option-group"),G=x("el-select"),P=x("el-form-item"),U=x("el-input"),N=x("el-button");return n(),V(c,null,[s(P,{label:t(a)("cms.fields.type"),prop:"type"},{default:g(()=>[s(G,{modelValue:t(m).form.items.type,"onUpdate:modelValue":l[0]||(l[0]=o=>t(m).form.items.type=o),placeholder:"请选择"},{default:g(()=>[(n(!0),V(c,null,S(t(i).optionGroup,o=>(n(),b(h,{key:o.label,label:t(a)("cms.fields."+o.label)},{default:g(()=>[(n(!0),V(c,null,S(o.options,k=>(n(),b(y,{key:k.value,label:k.label,value:k.value},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"]),u.setting.includes("textType")?(n(),b(p,{key:0,label:t(a)("文本框类型"),type:"radio",modelValue:e.setup.type,"onUpdate:modelValue":l[1]||(l[1]=o=>e.setup.type=o),"input-attr":{size:"large"},data:{childrenAttr:{border:!1},content:f(["string","textarea","number","password"])}},null,8,["label","modelValue","data"])):d("",!0),u.setting.includes("textType")&&e.setup.type=="number"?(n(),b(p,{key:1,label:t(a)("数值区间"),type:"string",prop:"numSection",modelValue:e.setup.numSection,"onUpdate:modelValue":l[2]||(l[2]=o=>e.setup.numSection=o),"input-attr":{placeholder:t(a)("Please input field",{field:t(a)("数值区间")})}},null,8,["label","modelValue","input-attr"])):d("",!0),u.setting.includes("textType")&&e.setup.type=="number"?(n(),b(p,{key:2,label:t(a)("步长"),type:"number",prop:"step",modelValue:e.setup.step,"onUpdate:modelValue":l[3]||(l[3]=o=>e.setup.step=o),modelModifiers:{number:!0},"input-attr":{step:"1",placeholder:t(a)("Please input field",{field:t(a)("步长")})}},null,8,["label","modelValue","input-attr"])):d("",!0),u.setting.includes("textType")&&e.setup.type=="textarea"?(n(),b(p,{key:3,label:t(a)("显示行数"),type:"number",prop:"linenum",modelValue:e.setup.linenum,"onUpdate:modelValue":l[4]||(l[4]=o=>e.setup.linenum=o),modelModifiers:{number:!0},"input-attr":{step:"1",placeholder:t(a)("Please input field",{field:t(a)("显示行数")})}},null,8,["label","modelValue","input-attr"])):d("",!0),u.setting.includes("select")?(n(),V(c,{key:4},[s(p,{label:t(a)("选项类型"),type:"radio",modelValue:e.setup.type,"onUpdate:modelValue":l[5]||(l[5]=o=>e.setup.type=o),"input-attr":{size:"large"},data:{childrenAttr:{border:!1},content:f(["key","keyValue"])}},null,8,["label","modelValue","data"]),s(P,{style:{"text-align":"center"}},{default:g(()=>[s(U,{style:{width:"120px"},placeholder:"选项键",disabled:!0}),s(U,{style:{width:"120px","margin-left":"5px"},placeholder:"选项值",disabled:!0})]),_:1}),(n(!0),V(c,null,S(e.setup.options,(o,k)=>(n(),b(P,{style:{"text-align":"center"},key:k},{default:g(()=>[s(U,{style:{width:"120px"},placeholder:"请输入选项键",modelValue:o.key,"onUpdate:modelValue":w=>o.key=w,autocomplete:"off",disabled:e.setup.type!="keyValue"},null,8,["modelValue","onUpdate:modelValue","disabled"]),s(U,{style:{width:"120px","margin-left":"5px"},placeholder:"请输入选项值",modelValue:o.value,"onUpdate:modelValue":w=>o.value=w,autocomplete:"off"},null,8,["modelValue","onUpdate:modelValue"]),s(N,{type:"danger",style:{"margin-left":"5px"},onClick:w=>T(k)},{default:g(()=>[C("删除")]),_:2},1032,["onClick"])]),_:2},1024))),128)),E("div",j,[s(N,{type:"success",onClick:l[6]||(l[6]=o=>D({key:"",value:"",type:"select"}))},{default:g(()=>[C("添加")]),_:1})])],64)):d("",!0),u.setting.includes("selectNum")?(n(),b(p,{key:5,label:t(a)("最大选择数"),type:"number",prop:"maxSelect",modelValue:e.setup.maxSelect,"onUpdate:modelValue":l[7]||(l[7]=o=>e.setup.maxSelect=o),modelModifiers:{number:!0},"input-attr":{step:"1",placeholder:t(a)("Please input field",{field:t(a)("最大选择数")})}},null,8,["label","modelValue","input-attr"])):d("",!0),u.setting.includes("remoteSelect")?(n(),V(c,{key:6},[s(p,{label:t(a)("接口名"),type:"string",modelValue:e.setup.remoteName,"onUpdate:modelValue":l[8]||(l[8]=o=>e.setup.remoteName=o),prop:"remoteName","input-attr":{placeholder:t(a)("Please input field",{field:t(a)("接口名")})}},null,8,["label","modelValue","input-attr"]),s(p,{label:t(a)("键字段"),type:"string",modelValue:e.setup.keyField,"onUpdate:modelValue":l[9]||(l[9]=o=>e.setup.keyField=o),prop:"keyField","input-attr":{placeholder:t(a)("Please input field",{field:t(a)("键字段")})}},null,8,["label","modelValue","input-attr"]),s(p,{label:t(a)("值字段"),type:"string",modelValue:e.setup.valueField,"onUpdate:modelValue":l[10]||(l[10]=o=>e.setup.valueField=o),prop:"valueField","input-attr":{placeholder:t(a)("Please input field",{field:t(a)("值字段")})}},null,8,["label","modelValue","input-attr"]),s(p,{label:t(a)("最多选择数"),type:"number",prop:"weigh",modelValue:e.setup.maxSelect,"onUpdate:modelValue":l[11]||(l[11]=o=>e.setup.maxSelect=o),modelModifiers:{number:!0},"input-attr":{step:"1",placeholder:t(a)("Please input field",{field:t(a)("最多选择数")})}},null,8,["label","modelValue","input-attr"])],64)):d("",!0),u.setting.includes("datePicker")?(n(),b(p,{key:7,label:t(a)("选择类型"),type:"radio",modelValue:e.setup.type,"onUpdate:modelValue":l[12]||(l[12]=o=>e.setup.type=o),"input-attr":{size:"large"},data:{childrenAttr:{border:!1},content:f(["datetime","year","date","time"])}},null,8,["label","modelValue","data"])):d("",!0),t(m).form.items.type=="city"?(n(),V(c,{key:8},[],64)):d("",!0),u.setting.includes("image")?(n(),b(p,{key:9,label:t(a)("cms.fields.allowFormat"),type:"checkbox",modelValue:e.setup.allowFormat,"onUpdate:modelValue":l[13]||(l[13]=o=>e.setup.allowFormat=o),"input-attr":{size:"large"},data:{childrenAttr:{border:!1},content:f(u.uploadAllowFormat.image)}},null,8,["label","modelValue","data"])):d("",!0),u.setting.includes("file")?(n(),b(p,{key:10,label:t(a)("cms.fields.allowFormat"),type:"checkbox",modelValue:e.setup.allowFormat,"onUpdate:modelValue":l[14]||(l[14]=o=>e.setup.allowFormat=o),"input-attr":{size:"large"},data:{childrenAttr:{border:!1},content:f(u.uploadAllowFormat.file)}},null,8,["label","modelValue","data"])):d("",!0),u.setting.includes("upload")||u.setting.includes("uploads")?(n(),b(p,{key:11,label:t(a)("cms.fields.maxFileSize"),type:"number",prop:"maxFileSize",modelValue:e.setup.maxFileSize,"onUpdate:modelValue":l[15]||(l[15]=o=>e.setup.maxFileSize=o),modelModifiers:{number:!0},"input-attr":{step:"1",placeholder:t(a)("Please input field",{field:t(a)("cms.fields.maxFileSize")})}},null,8,["label","modelValue","input-attr"])):d("",!0),u.setting.includes("uploads")?(n(),b(p,{key:12,label:t(a)("最大上传数"),type:"number",prop:"maxUpload",modelValue:e.setup.maxUpload,"onUpdate:modelValue":l[16]||(l[16]=o=>e.setup.maxUpload=o),modelModifiers:{number:!0},"input-attr":{step:"1",placeholder:t(a)("Please input field",{field:t(a)("最大上传数")})}},null,8,["label","modelValue","input-attr"])):d("",!0),u.setting.includes("image")?(n(),V(c,{key:13},[s(p,{label:t(a)("图片最大宽度"),type:"number",prop:"maxWidth",modelValue:e.setup.maxWidth,"onUpdate:modelValue":l[17]||(l[17]=o=>e.setup.maxWidth=o),modelModifiers:{number:!0},"input-attr":{step:"1",placeholder:t(a)("Please input field",{field:t(a)("图片最大宽度")})}},null,8,["label","modelValue","input-attr"]),s(p,{label:t(a)("图片最大高度"),type:"number",prop:"maxHight",modelValue:e.setup.maxHight,"onUpdate:modelValue":l[18]||(l[18]=o=>e.setup.maxHight=o),modelModifiers:{number:!0},"input-attr":{step:"1",placeholder:t(a)("Please input field",{field:t(a)("图片最大高度")})}},null,8,["label","modelValue","input-attr"])],64)):d("",!0),u.setting.includes("editor")?(n(),V(c,{key:14},[s(p,{label:t(a)("自动抓取缩略图"),type:"switch",modelValue:e.setup.autoThumb,"onUpdate:modelValue":l[19]||(l[19]=o=>e.setup.autoThumb=o),"input-attr":{size:"large"}},null,8,["label","modelValue"]),s(p,{label:t(a)("自动抓取关键词"),type:"switch",modelValue:e.setup.autoKeyword,"onUpdate:modelValue":l[20]||(l[20]=o=>e.setup.autoKeyword=o),"input-attr":{size:"large"}},null,8,["label","modelValue"]),s(p,{label:t(a)("关键词至少出现次数"),type:"number",prop:"minAppear",modelValue:e.setup.minAppear,"onUpdate:modelValue":l[21]||(l[21]=o=>e.setup.minAppear=o),modelModifiers:{number:!0},"input-attr":{step:"1",placeholder:t(a)("Please input field",{field:t(a)("关键词最少出现次数")})}},null,8,["label","modelValue","input-attr"]),s(p,{label:t(a)("自动抓取简介"),type:"switch",modelValue:e.setup.autoDescription,"onUpdate:modelValue":l[22]||(l[22]=o=>e.setup.autoDescription=o),"input-attr":{size:"large"}},null,8,["label","modelValue"]),s(p,{label:t(a)("截取内容前字数"),type:"number",prop:"cutContentNum",modelValue:e.setup.cutContentNum,"onUpdate:modelValue":l[23]||(l[23]=o=>e.setup.cutContentNum=o),modelModifiers:{number:!0},"input-attr":{step:"1",placeholder:t(a)("Please input field",{field:t(a)("截取内容前字数N个作为简介")})}},null,8,["label","modelValue","input-attr"])],64)):d("",!0)],64)}}});export{Z as _};
