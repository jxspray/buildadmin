import{h as X,w as Y,am as Z,r as T,q as m,X as g,o as i,k as b,m as o,p as v,P as s,Z as E,Y as N,O as f,z as d,l as F,U as u,_ as w,V as x,$ as G,a9 as H,W as B,a1 as J,a2 as Q}from"./vue-69ad5a16.js";import{b as ee}from"./index-afbe03c0.js";import{w as oe,a3 as te,_ as le}from"./index-32d6febb.js";import ae from"./index-f5346b54.js";import"./index-f98c8d12.js";import"./validate-4db1e214.js";import"./index.vue_vue_type_script_setup_true_lang-fce1224c.js";import"./index-2fb03bb1.js";const h=p=>(J("data-v-f730def9"),p=p(),Q(),p),se={class:"default-main ba-table-box"},ie={class:"custom-tabs"},ne={class:"custom-body"},ce={class:"tip-container"},de={class:"config-item-icon-container",style:{"margin-top":"30px",position:"relative",display:"flex"}},re={class:"item-icon-1"},me=["src"],_e=h(()=>o("div",{class:"item-icon-2"},null,-1)),fe={class:"config-title"},ue={class:"config-tip ellipsis-item"},pe={class:"config-message ellipsis-item"},ge={class:"set-container"},be={class:"config-item-leaf-container"},ve={class:"item-leaf-1"},he=h(()=>o("div",{class:"leaf leaf-11"},null,-1)),ke=h(()=>o("div",{class:"leaf leaf-13"},null,-1)),ye=h(()=>o("div",{class:"item-leaf-2"},null,-1)),Ce=["onClick"],Fe={class:"title"},we=X({name:"cms/config",__name:"index",setup(p){const{t:k}=oe(),y=Y(),e=new ee(new te("/admin/cms.config/"),{pk:"name",column:[]});Z("baTable",e);const l=T({configData:{basic:[{id:"cms",title:"基本配置",tip:"配置默认站点基本信息",message:"",icon:"cms-icon",leaf:"#915CF9",background:"linear-gradient(180deg, #D5B8FA 0%, #8F62C9 100%)",url:"",button:{background:"#E7DEF6",color:"#6625CF"}},{id:"seo",title:"SEO配置",tip:"配置默站点SEO",message:"",icon:"cms-icon",leaf:"#915CF9",background:"linear-gradient(180deg, #D5B8FA 0%, #8F62C9 100%)",url:"",button:{background:"#E7DEF6",color:"#6625CF"}}],block:[{id:"base",title:"基础碎片",tip:"必要的文本内容",message:"",icon:"cms-icon",leaf:"#915CF9",background:"linear-gradient(180deg, #D5B8FA 0%, #8F62C9 100%)",url:"",button:{background:"#E7DEF6",color:"#6625CF"}}]},activeName:"basic",type:"",modelShow:!1,modelTitle:"",loading:!1}),z=(a,t)=>(l.type=t,e.form.loading=!0,e.form.items={},e.api.edit({[e.table.pk]:t,group:a}).then(n=>{e.form.items=n.data.row.value,console.log(e.form.items)}).catch(n=>{e.toggleForm()}).finally(()=>{e.form.loading=!1})),I=(a,t,n)=>{O(n),z(a,t)},S=(a=void 0)=>{let t={};Object.keys(e.form.items).forEach(r=>{t[r]=e.form.items[r]===null?"":e.form.items[r]});const n=()=>{e.form.submitLoading=!0,e.api.postData("edit",{name:l.type,group:l.activeName,value:t}).then(r=>{e.toggleForm(),l.modelShow=!1}).finally(()=>{e.form.submitLoading=!1})};a?(e.form.ref=a,a.validate(r=>{r&&n()})):n()},O=a=>{l.modelShow=!0,l.modelTitle=a},D=()=>{l.modelShow=!1,l.modelTitle=""},$=(a,t)=>{},A=T({});return(a,t)=>{const n=m("el-col"),r=m("el-row"),L=m("el-tab-pane"),U=m("el-tabs"),K=m("el-form"),M=m("el-scrollbar"),V=m("el-button"),R=m("el-dialog"),j=g("drag"),q=g("zoom"),P=g("loading"),W=g("blur");return i(),b("div",se,[o("div",ie,[v(U,{modelValue:l.activeName,"onUpdate:modelValue":t[0]||(t[0]=_=>l.activeName=_),onTabClick:$},{default:s(()=>[(i(!0),b(E,null,N(l.configData,(_,C)=>(i(),f(L,{label:d(k)(C),name:C},{default:s(()=>[o("div",ne,[v(r,{gutter:30},{default:s(()=>[(i(!0),b(E,null,N(_,c=>(i(),f(n,{xs:24,sm:12,md:8,lg:6,xl:6},{default:s(()=>[o("div",{class:"config-item",style:F({background:c.background})},[o("div",ce,[o("div",de,[o("div",re,[o("img",{src:"/src/assets/addons/cms/img/config/"+c.icon+".png",alt:""},null,8,me)]),_e]),o("div",fe,u(c.title),1),o("div",ue,u(c.tip),1),o("div",pe,u(c.message),1)]),o("div",ge,[o("div",be,[o("div",ve,[he,o("div",{class:"leaf leaf-12",style:F({background:c.leaf})},null,4),ke]),ye]),o("div",{class:"config-item-btn display-flex-c",style:F(c.button),onClick:xe=>I(C,c.id,c.title)},"立即设置 ",12,Ce)])],4)]),_:2},1024))),256))]),_:2},1024)])]),_:2},1032,["label","name"]))),256))]),_:1},8,["modelValue"])]),v(R,{fullscreen:!0,class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":l.modelShow,onClose:D},{header:s(()=>[w((i(),b("div",Fe,[x(u(l.modelTitle),1)])),[[j,[".ba-operate-dialog",".el-dialog__header"]],[q,".ba-operate-dialog"]])]),footer:s(()=>[o("div",null,[v(V,{onClick:D},{default:s(()=>[x(u(d(k)("Cancel")),1)]),_:1}),w((i(),f(V,{loading:d(e).form.submitLoading,onClick:t[3]||(t[3]=_=>S(y.value)),type:"primary"},{default:s(()=>[x(u(d(k)("Save")),1)]),_:1},8,["loading"])),[[W]])])]),default:s(()=>[w((i(),f(M,{class:"ba-table-form-scrollbar"},{default:s(()=>[o("div",{class:G(["ba-operate-form","ba-edit-form"])},[d(e).form.loading?B("",!0):(i(),f(K,{key:0,ref_key:"formRef",ref:y,onKeyup:t[2]||(t[2]=H(_=>S(y.value),["enter"])),model:d(e).form,"label-position":"right",rules:A},{default:s(()=>[l.modelShow?(i(),f(ae,{key:0,modelValue:d(e).form.items,"onUpdate:modelValue":t[1]||(t[1]=_=>d(e).form.items=_),ifset:!0},null,8,["modelValue"])):B("",!0)]),_:1},8,["model","rules"]))])]),_:1})),[[P,d(e).form.loading]])]),_:1},8,["model-value"])])}}});const Ie=le(we,[["__scopeId","data-v-f730def9"]]);export{Ie as default};
