import{d as z,q as A,e as n,r as u,C as K,y as O,a as d,c as m,b as s,T as C,s as x,R as F,Q as w,u as t,v as T,t as j,a4 as M,U,V as I,S as V,Y as P,ah as Q,X as k}from"./vue-9a46e809.js";import{a as X}from"./index-ae07247d.js";import{i as Y,B as G}from"./index-81eda047.js";import{_ as L}from"./_plugin-vue_export-helper-c27b6911.js";import"./common-535f3731.js";import"./random-1d7fa280.js";import"./iconfont-76d408a9.js";import"./index-01bed986.js";import"./controllerUrls-941681c3.js";import"./index-e2596456.js";const J={catalog:"/admin/cms.catalog/index"},Z=z({name:"formItem",props:{label:{type:String},type:{type:String,required:!0,validator:l=>Y.includes(l)},modelValue:{required:!0},option:{type:Object,default:()=>{}},inputAttr:{type:Object,default:()=>{}},attr:{type:Object,default:()=>{}},data:{type:Object,default:()=>{}},prop:{type:String,default:""},placeholder:{type:String,default:""}},emits:["update:modelValue"],setup(l,{emit:_}){let{type:e,inputAttr:y,data:p}=l;l.type=="remoteSelect"&&(y={field:l.option.setup.valueField,"remote-url":J[l.option.setup.remoteName]});const S=o=>{_("update:modelValue",o)},f=A(()=>l.attr&&l.attr["block-help"]?l.attr["block-help"]:"");if(["select","selects","radio","checkbox"].includes(e)){let o={};l.option.setup.options.forEach(b=>{o[b.key]=b.value}),p={content:o}}["select","remoteSelect"].includes(e)&&l.option.setup.maxSelect>1&&(y.multiple=!0);const h=()=>{let o=n(G,{type:e,attr:{placeholder:l.placeholder,...y},data:p,modelValue:l.modelValue,"onUpdate:modelValue":S});return f.value?[o,n("div",{class:"block-help"},f.value)]:o},i=["string","password","number","textarea","datetime","year","date","time","select","selects","remoteSelect","city","icon","color"],c=["radio","checkbox","switch","array","image","images","file","files","editor"];if(i.includes(e))return()=>n(u("el-form-item"),{prop:l.prop,...l.attr,label:l.label},{default:h});if(c.includes(e)){let o=l.data&&l.data.title?l.data.title:l.label;const b=()=>[n("div",{class:"ba-form-item-label"},[n("div",null,o),n("div",{class:"ba-form-item-label-tip"},l.data&&l.data.tip?l.data.tip:"")])];return()=>n(u("el-form-item"),{class:"ba-input-item-"+e,prop:l.prop,...l.attr,label:l.label},{label:b,default:h})}}});const N=L(Z,[["__scopeId","data-v-dab09d90"]]),ee={class:"title"},te=z({__name:"popupForm",setup(l){const _=K(),e=Q("baTable");O({data:{}});const y=["text","textarea","number","radio","checkbox","select"],p=[],S=["seo_title","seo_keyword","seo_description"],f=[],v=[];e.before={onSubmit:function(i){}},e.after={getIndex:function(){e.form.extend.fields.forEach(i=>{S.includes(i.type)?f.push(i):y.includes(i.type)?p.push(i):v.push(i)})}};const{t:r}=X(),h=O({});return(i,c)=>{const o=u("el-tab-pane"),b=u("el-tabs"),$=u("el-form"),q=u("el-scrollbar"),B=u("el-button"),D=u("el-dialog"),E=k("drag"),H=k("zoom"),R=k("loading"),W=k("blur");return d(),m(D,{fullscreen:!0,class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":!!t(e).form.operate,onClose:t(e).toggleForm},{header:s(()=>[C((d(),x("div",ee,[F(w(t(e).form.operate?t(r)(t(e).form.operate):""),1)])),[[E,[".ba-operate-dialog",".el-dialog__header"]],[H,".ba-operate-dialog"]])]),footer:s(()=>[T("div",{style:j("width: calc(100% - "+t(e).form.labelWidth/1.8+"px)")},[n(B,{onClick:c[1]||(c[1]=a=>t(e).toggleForm(""))},{default:s(()=>[F(w(t(r)("Cancel")),1)]),_:1}),C((d(),m(B,{loading:t(e).form.submitLoading,onClick:c[2]||(c[2]=a=>t(e).onSubmit(_.value)),type:"primary"},{default:s(()=>[F(w(t(e).form.operateIds&&t(e).form.operateIds.length>1?t(r)("Save and edit next item"):t(r)("Save")),1)]),_:1},8,["loading"])),[[W]])],4)]),default:s(()=>[C((d(),m(q,{class:"ba-table-form-scrollbar"},{default:s(()=>[T("div",{class:P(["ba-operate-form","ba-"+t(e).form.operate+"-form"]),style:j("width: calc(100% - "+t(e).form.labelWidth/2+"px)")},[t(e).form.loading?V("",!0):(d(),m($,{key:0,ref_key:"formRef",ref:_,onKeyup:c[0]||(c[0]=M(a=>t(e).onSubmit(_.value),["enter"])),model:t(e).form.items,"label-position":"right","label-width":t(e).form.labelWidth+"px",rules:h},{default:s(()=>[n(b,{"tab-position":"left",class:"catalog-tabs"},{default:s(()=>[p.length?(d(),m(o,{key:0,label:t(r)("cms.catalog.base")},{default:s(()=>[(d(),x(I,null,U(p,a=>n(N,{type:a.type,label:t(r)(a.name),modelValue:t(e).form.items[a.field],"onUpdate:modelValue":g=>t(e).form.items[a.field]=g,option:a},null,8,["type","label","modelValue","onUpdate:modelValue","option"])),64))]),_:1},8,["label"])):V("",!0),f.length?(d(),m(o,{key:1,label:t(r)("cms.catalog.seo")},{default:s(()=>[(d(),x(I,null,U(f,a=>n(N,{type:a.type,label:t(r)(a.name),modelValue:t(e).form.items[a.field],"onUpdate:modelValue":g=>t(e).form.items[a.field]=g,option:a},null,8,["type","label","modelValue","onUpdate:modelValue","option"])),64))]),_:1},8,["label"])):V("",!0),v.length?(d(),m(o,{key:2,label:t(r)("cms.catalog.extend")},{default:s(()=>[(d(),x(I,null,U(v,a=>n(N,{type:a.type,label:t(r)(a.name),modelValue:t(e).form.items[a.field],"onUpdate:modelValue":g=>t(e).form.items[a.field]=g,option:a},null,8,["type","label","modelValue","onUpdate:modelValue","option"])),64))]),_:1},8,["label"])):V("",!0)]),_:1})]),_:1},8,["model","label-width","rules"]))],6)]),_:1})),[[R,t(e).form.loading]])]),_:1},8,["model-value","onClose"])}}});const me=L(te,[["__scopeId","data-v-c5bd1baf"]]);export{me as default};
