import{b as ye,a as me,h as ve,w as Q,r as ee,E as he,n as G,az as te,F as ne,q as R,X as oe,o as k,k as F,p as w,P as T,m as P,z as re,Z as ae,Y as le,U as ge,W as $,$ as K,O as H,a8 as be,_ as _e,V as X,aA as we,a9 as xe,l as Ee,J as Se}from"./vue-69ad5a16.js";import{b as Z}from"./validate-4db1e214.js";import{S as ie,B as ke}from"./index-afbe03c0.js";import{w as Ce,G as Te,_ as Ae}from"./index-32d6febb.js";import{_ as Ve}from"./index.vue_vue_type_script_setup_true_lang-fce1224c.js";import Oe from"./index-2fb03bb1.js";import"./index-f98c8d12.js";var se={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(x,M){(function(O,E){x.exports=E()})(me,function(){return function(){var N={686:function(f,s,e){e.d(s,{default:function(){return pe}});var u=e(279),d=e.n(u),t=e(370),g=e.n(t),b=e(817),S=e.n(b);function y(c){try{return document.execCommand(c)}catch{return!1}}var h=function(o){var n=S()(o);return y("cut"),n},r=h;function a(c){var o=document.documentElement.getAttribute("dir")==="rtl",n=document.createElement("textarea");n.style.fontSize="12pt",n.style.border="0",n.style.padding="0",n.style.margin="0",n.style.position="absolute",n.style[o?"right":"left"]="-9999px";var l=window.pageYOffset||document.documentElement.scrollTop;return n.style.top="".concat(l,"px"),n.setAttribute("readonly",""),n.value=c,n}var m=function(o,n){var l=a(o);n.container.appendChild(l);var i=S()(l);return y("copy"),l.remove(),i},_=function(o){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},l="";return typeof o=="string"?l=m(o,n):o instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(o==null?void 0:o.type)?l=m(o.value,n):(l=S()(o),y("copy")),l},j=_;function L(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?L=function(n){return typeof n}:L=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},L(c)}var W=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=o.action,l=n===void 0?"copy":n,i=o.container,p=o.target,A=o.text;if(l!=="copy"&&l!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(p!==void 0)if(p&&L(p)==="object"&&p.nodeType===1){if(l==="copy"&&p.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(l==="cut"&&(p.hasAttribute("readonly")||p.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(A)return j(A,{container:i});if(p)return l==="cut"?r(p):j(p,{container:i})},D=W;function I(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?I=function(n){return typeof n}:I=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},I(c)}function Y(c,o){if(!(c instanceof o))throw new TypeError("Cannot call a class as a function")}function z(c,o){for(var n=0;n<o.length;n++){var l=o[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(c,l.key,l)}}function q(c,o,n){return o&&z(c.prototype,o),n&&z(c,n),c}function v(c,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");c.prototype=Object.create(o&&o.prototype,{constructor:{value:c,writable:!0,configurable:!0}}),o&&C(c,o)}function C(c,o){return C=Object.setPrototypeOf||function(l,i){return l.__proto__=i,l},C(c,o)}function V(c){var o=de();return function(){var l=U(c),i;if(o){var p=U(this).constructor;i=Reflect.construct(l,arguments,p)}else i=l.apply(this,arguments);return ce(this,i)}}function ce(c,o){return o&&(I(o)==="object"||typeof o=="function")?o:ue(c)}function ue(c){if(c===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return c}function de(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function U(c){return U=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},U(c)}function J(c,o){var n="data-clipboard-".concat(c);if(o.hasAttribute(n))return o.getAttribute(n)}var fe=function(c){v(n,c);var o=V(n);function n(l,i){var p;return Y(this,n),p=o.call(this),p.resolveOptions(i),p.listenClick(l),p}return q(n,[{key:"resolveOptions",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof i.action=="function"?i.action:this.defaultAction,this.target=typeof i.target=="function"?i.target:this.defaultTarget,this.text=typeof i.text=="function"?i.text:this.defaultText,this.container=I(i.container)==="object"?i.container:document.body}},{key:"listenClick",value:function(i){var p=this;this.listener=g()(i,"click",function(A){return p.onClick(A)})}},{key:"onClick",value:function(i){var p=i.delegateTarget||i.currentTarget,A=this.action(p)||"copy",B=D({action:A,container:this.container,target:this.target(p),text:this.text(p)});this.emit(B?"success":"error",{action:A,text:B,trigger:p,clearSelection:function(){p&&p.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(i){return J("action",i)}},{key:"defaultTarget",value:function(i){var p=J("target",i);if(p)return document.querySelector(p)}},{key:"defaultText",value:function(i){return J("text",i)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(i){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return j(i,p)}},{key:"cut",value:function(i){return r(i)}},{key:"isSupported",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],p=typeof i=="string"?[i]:i,A=!!document.queryCommandSupported;return p.forEach(function(B){A=A&&!!document.queryCommandSupported(B)}),A}}]),n}(d()),pe=fe},828:function(f){var s=9;if(typeof Element<"u"&&!Element.prototype.matches){var e=Element.prototype;e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}function u(d,t){for(;d&&d.nodeType!==s;){if(typeof d.matches=="function"&&d.matches(t))return d;d=d.parentNode}}f.exports=u},438:function(f,s,e){var u=e(828);function d(b,S,y,h,r){var a=g.apply(this,arguments);return b.addEventListener(y,a,r),{destroy:function(){b.removeEventListener(y,a,r)}}}function t(b,S,y,h,r){return typeof b.addEventListener=="function"?d.apply(null,arguments):typeof y=="function"?d.bind(null,document).apply(null,arguments):(typeof b=="string"&&(b=document.querySelectorAll(b)),Array.prototype.map.call(b,function(a){return d(a,S,y,h,r)}))}function g(b,S,y,h){return function(r){r.delegateTarget=u(r.target,S),r.delegateTarget&&h.call(b,r)}}f.exports=t},879:function(f,s){s.node=function(e){return e!==void 0&&e instanceof HTMLElement&&e.nodeType===1},s.nodeList=function(e){var u=Object.prototype.toString.call(e);return e!==void 0&&(u==="[object NodeList]"||u==="[object HTMLCollection]")&&"length"in e&&(e.length===0||s.node(e[0]))},s.string=function(e){return typeof e=="string"||e instanceof String},s.fn=function(e){var u=Object.prototype.toString.call(e);return u==="[object Function]"}},370:function(f,s,e){var u=e(879),d=e(438);function t(y,h,r){if(!y&&!h&&!r)throw new Error("Missing required arguments");if(!u.string(h))throw new TypeError("Second argument must be a String");if(!u.fn(r))throw new TypeError("Third argument must be a Function");if(u.node(y))return g(y,h,r);if(u.nodeList(y))return b(y,h,r);if(u.string(y))return S(y,h,r);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function g(y,h,r){return y.addEventListener(h,r),{destroy:function(){y.removeEventListener(h,r)}}}function b(y,h,r){return Array.prototype.forEach.call(y,function(a){a.addEventListener(h,r)}),{destroy:function(){Array.prototype.forEach.call(y,function(a){a.removeEventListener(h,r)})}}}function S(y,h,r){return d(document.body,y,h,r)}f.exports=t},817:function(f){function s(e){var u;if(e.nodeName==="SELECT")e.focus(),u=e.value;else if(e.nodeName==="INPUT"||e.nodeName==="TEXTAREA"){var d=e.hasAttribute("readonly");d||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),d||e.removeAttribute("readonly"),u=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var t=window.getSelection(),g=document.createRange();g.selectNodeContents(e),t.removeAllRanges(),t.addRange(g),u=t.toString()}return u}f.exports=s},279:function(f){function s(){}s.prototype={on:function(e,u,d){var t=this.e||(this.e={});return(t[e]||(t[e]=[])).push({fn:u,ctx:d}),this},once:function(e,u,d){var t=this;function g(){t.off(e,g),u.apply(d,arguments)}return g._=u,this.on(e,g,d)},emit:function(e){var u=[].slice.call(arguments,1),d=((this.e||(this.e={}))[e]||[]).slice(),t=0,g=d.length;for(t;t<g;t++)d[t].fn.apply(d[t].ctx,u);return this},off:function(e,u){var d=this.e||(this.e={}),t=d[e],g=[];if(t&&u)for(var b=0,S=t.length;b<S;b++)t[b].fn!==u&&t[b].fn._!==u&&g.push(t[b]);return g.length?d[e]=g:delete d[e],this}},f.exports=s,f.exports.TinyEmitter=s}},O={};function E(f){if(O[f])return O[f].exports;var s=O[f]={exports:{}};return N[f](s,s.exports,E),s.exports}return function(){E.n=function(f){var s=f&&f.__esModule?function(){return f.default}:function(){return f};return E.d(s,{a:s}),s}}(),function(){E.d=function(f,s){for(var e in s)E.o(s,e)&&!E.o(f,e)&&Object.defineProperty(f,e,{enumerable:!0,get:s[e]})}}(),function(){E.o=function(f,s){return Object.prototype.hasOwnProperty.call(f,s)}}(),E(686)}().default})})(se);var Fe=se.exports;const Ie=ye(Fe),Re=x=>{const M=(x==null?void 0:x.appendToBody)===void 0?!0:x.appendToBody;return{toClipboard(N,O){return new Promise((E,f)=>{const s=document.createElement("button"),e=new Ie(s,{text:()=>N,action:()=>"copy",container:O!==void 0?O:document.body});e.on("success",u=>{e.destroy(),E(u)}),e.on("error",u=>{e.destroy(),f(u)}),M&&document.body.appendChild(s),s.click(),M&&document.body.removeChild(s)})}}},Ne={key:0,class:"el-field-push"},je={class:"el-field-move-item"},Le={class:"title"},Me=["data-id"],Pe={key:0,class:"curd-icon"},De={key:1,class:"w100"},ze={key:0,class:"design-field-empty"},Ue={class:"title"},Be={slot:"footer",class:"dialog-footer"},$e=ve({__name:"index",props:["modelValue","labelWidth","labelPosition","variable","ifset","repeat"],emits:["update:modelValue"],setup(x,{emit:M}){const N=x,{toClipboard:O}=Re(),{t:E}=Ce(),f=Q(),s=Q(),e=Te(),u={id(r=16){const a="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678";let m="";for(let _=0;_<r;_++)m+=a.charAt(Math.floor(Math.random()*a.length));return m},field(r=16){const a="abcdefhijkmnprstwxyz1234567890";let m="";for(let _=0;_<r;_++)m+=a.charAt(Math.floor(Math.random()*a.length));return m}},d=[{label:"文本",type:"string",value:"",icon:"local-danhangshurukuang"},{label:"文本域",type:"textarea",value:"",icon:"local-duohangshurukuang"},{label:"编辑器",type:"editor",value:"",icon:"local-fuwenbenbianjiqi"},{label:"链接设置",type:"link-select",value:{},icon:"local-lianjie"},{label:"自定义数组",type:"customArray",value:{},icon:"local-shuzu"},{label:"图片上传",type:"image",value:"",icon:"local-tupianpic"},{label:"图片列表",type:"images",value:[],icon:"local-huadongduotu"},{label:"文件上传",type:"file",value:"",icon:"local-wenjianjiawenjian"},{label:"文件列表",type:"files",value:[],icon:"local-wenjian1"},{label:"分类编号",type:"remoteSelect",value:0,icon:"local-bianhaodanhao"},{label:"参数设置",type:"array",value:[],icon:"local-chanpincanshu"},{label:"颜色选择",type:"color",value:"",icon:"local-yanse1"},{label:"开关",type:"switch",value:!1,icon:"local-kaiguan"}];console.log(N.modelValue);const t=ee({show:!0,list:N.modelValue,setForm:{},setShow:!1,setIndex:0,draggingField:!1});console.log(t.list);const g=()=>{t.setShow=!1},b=(r,a)=>{t.list.splice(a,1),t.show=!1,G(()=>{t.show=!0})},S=async(r,a)=>{let m=r.field;try{await O(m),Se({message:"复制成功",type:"success"})}catch(_){console.error(_)}},y=(r,a)=>{t.setIndex=a,t.setForm=JSON.parse(JSON.stringify(r)),t.setShow=!0},h=(r=void 0)=>{if(r)r.validate(a=>{a&&(t.list[t.setIndex]=t.setForm,g())});else return!1};return he(()=>{const r=ie.create(s.value,{group:"design-field",animation:200,filter:".design-field-empty",handle:".rank",onAdd:a=>{if(d[a.oldIndex]){const m=d[a.oldIndex],_={field:u.id(6),label:"未命名",type:m};t.list.splice(a.newIndex,0,_),y(_,a.newIndex)}a.item.remove(),t.show=!1,G(()=>{r.sort(te(d.length).map(m=>m.toString())),t.show=!0})},onEnd:a=>{const m=t.list[a.oldIndex];t.list.splice(a.oldIndex,1),t.list.splice(a.newIndex,0,m),G(()=>{r.sort(te(t.list.length).map(_=>_.toString()))})}});e.value.forEach((a,m)=>{ie.create(a,{sort:!1,group:{name:"design-field",pull:"clone",put:!1},animation:200,setData:_=>{_.setData("name",Object.keys(d)[m])},onStart:()=>{t.draggingField=!0},onEnd:()=>{t.draggingField=!1}})})}),ne(t.list,r=>{M("update:modelValue",r)}),ne(t.show,r=>{console.log(r)}),ee({label:[Z({name:"required",title:E("字段标题")})],field:[Z({name:"required",title:E("字段变量")})],type:[Z({name:"required",title:E("字段类型")})]}),(r,a)=>{const m=R("Icon"),_=R("el-col"),j=R("el-form-item"),L=R("el-scrollbar"),W=R("el-row"),D=R("el-input"),I=R("el-button"),Y=R("el-dialog"),z=oe("drag"),q=oe("zoom");return k(),F("div",{class:K(["el-field",{"el-field-set":x.ifset}]),style:Ee({display:x.ifset?"flex":"block"})},[w(W,{class:"fields-box",gutter:20},{default:T(()=>[w(_,{xs:24,span:4,style:{height:"100%"}},{default:T(()=>[x.ifset?(k(),F("div",Ne,[P("div",{class:"add-draggable",ref:re(e).set},[(k(),F(ae,null,le(d,(v,C)=>P("div",je,[w(m,{name:v.icon,color:"var(--el-text-color-primary)"},null,8,["name"]),P("div",Le,ge(v.label),1)])),64))],512)])):$("",!0)]),_:1}),w(_,{xs:24,span:20,style:{height:"100%"}},{default:T(()=>[w(L,{class:"ba-table-form-scrollbar"},{default:T(()=>[P("div",{ref_key:"designWindowRef",ref:s,class:"ba-scroll-style",style:{height:"100%"}},[(k(!0),F(ae,null,le(t.list,(v,C)=>(k(),F("div",{key:C,class:K([{notset:x.ifset==!1,set:x.ifset},"el-field-content"]),"data-id":C},[(k(),H(j,{"data-id":C,label:v.label,key:C,class:K(["el-form-draggable",{"el-form-set":x.ifset}])},{default:T(()=>[x.ifset?(k(),F("div",Pe,[w(m,{name:"el-icon-CopyDocument",class:"myicon",color:"var(--el-bg-color-overlay)",onClick:V=>S(v,C),title:"复制"},null,8,["onClick"]),w(m,{name:"el-icon-Edit",class:"myicon",color:"var(--el-bg-color-overlay)",onClick:V=>y(v,C),title:"编辑"},null,8,["onClick"]),w(m,{name:"el-icon-Rank",class:"rank myicon",color:"var(--el-bg-color-overlay)",title:"移动"}),w(m,{name:"el-icon-Delete",class:"myicon",color:"var(--el-bg-color-overlay)",onClick:V=>b(v,C),title:"删除"},null,8,["onClick"])])):$("",!0),t.show?(k(),F("div",De,[v.type.type=="link-select"?(k(),H(Ve,{key:0,modelValue:v.type.value,"onUpdate:modelValue":V=>v.type.value=V,size:""},null,8,["modelValue","onUpdate:modelValue"])):v.type.type=="customArray"?(k(),H(Oe,{key:1,modelValue:v.type.value,"onUpdate:modelValue":V=>v.type.value=V},null,8,["modelValue","onUpdate:modelValue"])):(k(),H(ke,{key:2,onPointerdown:a[0]||(a[0]=be(()=>{},["stop"])),modelValue:v.type.value,"onUpdate:modelValue":V=>v.type.value=V,type:v.type.type},null,8,["modelValue","onUpdate:modelValue","type"]))])):$("",!0)]),_:2},1032,["data-id","label","class"]))],10,Me))),128)),!t.list.length&&!t.draggingField?(k(),F("div",ze," 拖动左侧元素至此处开始设计表单 ")):$("",!0)],512)]),_:1})]),_:1})]),_:1}),w(Y,{"model-value":t.setShow,title:"字段设置",width:"500px",top:"30px","close-on-click-modal":!1,onClose:g,"append-to-body":""},{header:T(()=>[_e((k(),F("div",Ue,[X(" 字段设置 ")])),[[z,[".ba-operate-dialog",".el-dialog__header"]],[q,".ba-operate-dialog"]])]),default:T(()=>[w(re(we),{ref_key:"setFormRef",ref:f,onKeyup:a[3]||(a[3]=xe(v=>h(f.value),["enter"])),model:t.setForm,"label-width":x.labelWidth},{default:T(()=>[w(j,{label:"字段标题：",prop:"label"},{default:T(()=>[w(D,{modelValue:t.setForm.label,"onUpdate:modelValue":a[1]||(a[1]=v=>t.setForm.label=v),placeholder:"如：内容"},null,8,["modelValue"])]),_:1}),w(j,{label:"字段变量：",prop:"field"},{default:T(()=>[w(D,{modelValue:t.setForm.field,"onUpdate:modelValue":a[2]||(a[2]=v=>t.setForm.field=v),placeholder:"如：content"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","label-width"]),P("span",Be,[w(I,{size:"small",type:"primary",onClick:a[4]||(a[4]=v=>h(f.value))},{default:T(()=>[X("确 定")]),_:1}),w(I,{size:"small",onClick:g},{default:T(()=>[X("取 消")]),_:1})])]),_:1},8,["model-value"])],6)}}});const Ze=Ae($e,[["__scopeId","data-v-bfd01237"]]);export{Ze as default};
