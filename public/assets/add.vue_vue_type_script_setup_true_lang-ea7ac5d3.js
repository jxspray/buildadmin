import{d as fe,y as M,a as d,s as ce,c as m,u,S as g,a4 as P,a3 as K,C as ge,b as y,T as de,R as N,Q as R,v as re,e as v,t as se,r as I,X as B}from"./vue-9a46e809.js";import{F as f}from"./index-a7be6d6a.js";import{c as pe,b}from"./validate-61c16ed0.js";import{f as S}from"./common-535f3731.js";import{i as U}from"./index-81eda047.js";import{i as me,a as ye}from"./index-ae07247d.js";const x="/admin/routine.config/",z=new Map([["index",x+"index"],["add",x+"add"],["edit",x+"edit"],["del",x+"del"]]);function Ee(){return S({url:z.get("index"),method:"get"})}function Ve(s,c){return S({url:z.get(s),method:"post",data:c},{showSuccessMessage:!0})}function De(s){return S({url:z.get("del"),method:"DELETE",params:{ids:s}},{showSuccessMessage:!0})}function Ie(s,c){return S({url:x+"sendTestMail",method:"POST",data:Object.assign({},s,{testMail:c})},{showSuccessMessage:!0})}const ve=fe({__name:"createData",props:{dataTitle:{default:me.global.t("utils.Var")},modelValue:{default:()=>({name:"",title:"",type:"",tip:"",rule:[],extend:"",dict:"",inputExtend:""})},options:null,excludeInputTypes:{default:()=>[]},excludeValidatorRule:{default:()=>[]}},emits:["update:modelValue"],setup(s,{emit:c}){var V,n,w,C,h,k,T,E,D,p,F,O,A,L,W,$,G,j,Q,X,H,J,Y,Z,ee,te,le,ae,oe,ie,ne,ue;const t=s,{t:l}=me.global,e=M({name:{show:((n=(V=t.options)==null?void 0:V.name)==null?void 0:n.show)!==!1,value:t.modelValue.name,title:((C=(w=t.options)==null?void 0:w.name)==null?void 0:C.title)??t.dataTitle+l("utils.Name")},title:{show:((k=(h=t.options)==null?void 0:h.title)==null?void 0:k.show)!==!1,value:t.modelValue.title,title:((E=(T=t.options)==null?void 0:T.title)==null?void 0:E.title)??t.dataTitle+l("utils.Title")},type:{show:((p=(D=t.options)==null?void 0:D.type)==null?void 0:p.show)!==!1,value:t.modelValue.type,title:((O=(F=t.options)==null?void 0:F.type)==null?void 0:O.title)??t.dataTitle+l("utils.type")},tip:{show:((L=(A=t.options)==null?void 0:A.tip)==null?void 0:L.show)!==!1,value:t.modelValue.tip,title:(($=(W=t.options)==null?void 0:W.tip)==null?void 0:$.title)??l("utils.Tip")},rule:{show:((j=(G=t.options)==null?void 0:G.rule)==null?void 0:j.show)!==!1,value:t.modelValue.rule,title:((X=(Q=t.options)==null?void 0:Q.rule)==null?void 0:X.title)??l("utils.Rule")},extend:{show:((J=(H=t.options)==null?void 0:H.extend)==null?void 0:J.show)!==!1,value:t.modelValue.extend,title:((Z=(Y=t.options)==null?void 0:Y.extend)==null?void 0:Z.title)??"FormItem "+l("utils.Extend")},dict:{show:((te=(ee=t.options)==null?void 0:ee.dict)==null?void 0:te.show)!==!1,value:t.modelValue.dict,title:((ae=(le=t.options)==null?void 0:le.dict)==null?void 0:ae.title)??l("utils.Dict")},inputExtend:{show:((ie=(oe=t.options)==null?void 0:oe.inputExtend)==null?void 0:ie.show)!==!1,value:t.modelValue.inputExtend,title:((ue=(ne=t.options)==null?void 0:ne.inputExtend)==null?void 0:ue.title)??"Input "+l("utils.Extend")}}),i=M({validators:{},inputTypes:{}}),r=()=>{c("update:modelValue",{name:e.name.value??"",title:e.title.value??"",type:e.type.value??"",tip:e.tip.value??"",rule:e.rule.value??[],extend:e.extend.value??"",dict:e.dict.value??"",inputExtend:e.inputExtend.value??""})};return(()=>{let q={};for(const o in U)t.excludeInputTypes.includes(U[o])||(q[U[o]]=U[o]);i.inputTypes=q;let a={};for(const o in pe)t.excludeValidatorRule.includes(o)||(a[o]=pe[o]);i.validators=a,r()})(),(q,a)=>(d(),ce("div",null,[e.name.show?(d(),m(f,{key:0,label:e.name.title,type:"string",modelValue:e.name.value,"onUpdate:modelValue":a[0]||(a[0]=o=>e.name.value=o),placeholder:u(l)("Please input field",{field:e.name.title}),"input-attr":{onChange:r},prop:"name"},null,8,["label","modelValue","placeholder","input-attr"])):g("",!0),e.title.show?(d(),m(f,{key:1,label:e.title.title,type:"string",modelValue:e.title.value,"onUpdate:modelValue":a[1]||(a[1]=o=>e.title.value=o),placeholder:u(l)("Please input field",{field:e.title.title}),"input-attr":{onChange:r},prop:"title"},null,8,["label","modelValue","placeholder","input-attr"])):g("",!0),e.type.show?(d(),m(f,{key:2,label:e.type.title,type:"select",modelValue:e.type.value,"onUpdate:modelValue":a[2]||(a[2]=o=>e.type.value=o),data:{content:i.inputTypes},placeholder:u(l)("Please select field",{field:e.type.title}),"input-attr":{onChange:r},prop:"type"},null,8,["label","modelValue","data","placeholder","input-attr"])):g("",!0),e.dict.show&&["radio","checkbox","select","selects"].includes(e.type.value)?(d(),m(f,{key:3,label:e.dict.title,type:"textarea",modelValue:e.dict.value,"onUpdate:modelValue":a[3]||(a[3]=o=>e.dict.value=o),"input-attr":{rows:3,placeholder:u(l)("utils.One line at a time, without quotation marks, for example: key1=value1"),onChange:r},prop:"dict",onKeyup:a[4]||(a[4]=P(K(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):g("",!0),e.tip.show?(d(),m(f,{key:4,label:e.tip.title,type:"string",modelValue:e.tip.value,"onUpdate:modelValue":a[5]||(a[5]=o=>e.tip.value=o),placeholder:u(l)("Please input field",{field:e.tip.title}),"input-attr":{onChange:r},prop:"tip"},null,8,["label","modelValue","placeholder","input-attr"])):g("",!0),e.rule.show?(d(),m(f,{key:5,label:e.rule.title,type:"selects",modelValue:e.rule.value,"onUpdate:modelValue":a[6]||(a[6]=o=>e.rule.value=o),data:{content:i.validators},placeholder:u(l)("Please select field",{field:e.rule.title}),"input-attr":{onChange:r},prop:"rule"},null,8,["label","modelValue","data","placeholder","input-attr"])):g("",!0),e.extend.show?(d(),m(f,{key:6,label:e.extend.title,type:"textarea",modelValue:e.extend.value,"onUpdate:modelValue":a[7]||(a[7]=o=>e.extend.value=o),"input-attr":{onChange:r,placeholder:u(l)("utils.One attribute per line without quotation marks(formitem)")},prop:"extend",onKeyup:a[8]||(a[8]=P(K(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):g("",!0),e.inputExtend.show?(d(),m(f,{key:7,label:e.inputExtend.title,type:"textarea",modelValue:e.inputExtend.value,"onUpdate:modelValue":a[9]||(a[9]=o=>e.inputExtend.value=o),"input-attr":{onChange:r,placeholder:u(l)("utils.Extended properties of Input, one line without quotation marks, such as: size=large")},prop:"inputExtend",onKeyup:a[10]||(a[10]=P(K(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):g("",!0)]))}}),be={class:"title"},Ue=fe({__name:"add",props:{modelValue:{type:Boolean,default:!1},configGroup:{default:()=>({})}},emits:["update:modelValue"],setup(s,{emit:c}){const t=()=>{c("update:modelValue",!1)},{t:l}=ye(),e=ge(),i=M({inputTypes:{},labelWidth:180,submitLoading:!1,addConfig:{group:"",weigh:0,content:""},formItemData:{dict:`key1=value1
key2=value2`}}),r=M({group:[b({name:"required",trigger:"change",message:l("Please select field",{field:l("routine.config.Variable grouping")})})],name:[b({name:"required",title:l("routine.config.Variable name")}),b({name:"varName",message:l("Please enter the correct field",{field:l("routine.config.Variable name")})})],title:[b({name:"required",title:l("routine.config.Variable title")})],type:[b({name:"required",trigger:"change",message:l("Please select field",{field:l("routine.config.Variable type")})})],weigh:[b({name:"integer",title:l("routine.config.number")})]}),_=V=>{V&&V.validate(n=>{n&&(i.addConfig.content=i.formItemData.dict,delete i.formItemData.dict,Ve("add",{...i.addConfig,...i.formItemData}).then(()=>{c("update:modelValue",!1)}))})};return(V,n)=>{const w=I("el-form"),C=I("el-scrollbar"),h=I("el-button"),k=I("el-dialog"),T=B("drag"),E=B("zoom"),D=B("blur");return d(),m(k,{class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":s.modelValue,onClose:t},{header:y(()=>[de((d(),ce("div",be,[N(R(u(l)("routine.config.Add configuration item")),1)])),[[T,[".ba-operate-dialog",".el-dialog__header"]],[E,".ba-operate-dialog"]])]),footer:y(()=>[re("div",{style:se("width: calc(100% - "+i.labelWidth/1.8+"px)")},[v(h,{onClick:t},{default:y(()=>[N(R(u(l)("Cancel")),1)]),_:1}),de((d(),m(h,{loading:i.submitLoading,onClick:n[4]||(n[4]=p=>_(e.value)),type:"primary"},{default:y(()=>[N(R(u(l)("add")),1)]),_:1},8,["loading"])),[[D]])],4)]),default:y(()=>[v(C,{class:"ba-table-form-scrollbar"},{default:y(()=>[re("div",{class:"ba-operate-form ba-add-form",style:se("width: calc(100% - "+i.labelWidth/2+"px)")},[v(w,{ref_key:"formRef",ref:e,onKeyup:n[3]||(n[3]=P(p=>_(e.value),["enter"])),rules:r,model:{...i.addConfig,...i.formItemData},"label-position":"right","label-width":160},{default:y(()=>[v(f,{label:u(l)("routine.config.Variable grouping"),type:"select",modelValue:i.addConfig.group,"onUpdate:modelValue":n[0]||(n[0]=p=>i.addConfig.group=p),prop:"group",data:{content:s.configGroup}},null,8,["label","modelValue","data"]),v(ve,{modelValue:i.formItemData,"onUpdate:modelValue":n[1]||(n[1]=p=>i.formItemData=p)},null,8,["modelValue"]),v(f,{label:u(l)("weigh"),type:"number",modelValue:i.addConfig.weigh,"onUpdate:modelValue":n[2]||(n[2]=p=>i.addConfig.weigh=p),modelModifiers:{number:!0},prop:"weigh"},null,8,["label","modelValue"])]),_:1},8,["rules","model"])],4)]),_:1})]),_:1},8,["model-value"])}}});export{Ue as _,Ie as a,De as d,Ee as i,Ve as p};
