import{f as Pe,r as S,o as d,j as Me,O as m,w as n,W as y,a8 as _,a7 as O,N as _e,s as Se,p as P,X as R,P as b,_ as Ee,V as W,U as z,l as De,k as Ie,m as h}from"./vue-FrqQdkED.js";import{F as f}from"./index-joW0DQ_l.js";import{c as Ue,b as x}from"./validate-oqL-sMd2.js";import{c as q,i as Ae,e as qe}from"./index-h9hEbd9y.js";import{i as M}from"./index-8cTtyBlP.js";const C="/admin/routine.Config/",N=new Map([["index",C+"index"],["add",C+"add"],["edit",C+"edit"],["del",C+"del"],["sendTestMail",C+"sendTestMail"]]);function Le(){return q({url:N.get("index"),method:"get"})}function Ne(c,V){return q({url:N.get(c),method:"post",data:V},{showSuccessMessage:!0})}function $e(c){return q({url:N.get("del"),method:"DELETE",params:{ids:c}},{showSuccessMessage:!0})}function je(c,V){return q({url:N.get("sendTestMail"),method:"POST",data:Object.assign({},c,{testMail:V})},{showSuccessMessage:!0})}const Ke=Pe({__name:"createData",props:{dataTitle:{default:Ae.global.t("utils.Var")},modelValue:{default:()=>({name:"",title:"",type:"",tip:"",rule:[],extend:"",dict:"",inputExtend:""})},options:{},excludeInputTypes:{default:()=>[]},excludeValidatorRule:{default:()=>[]}},emits:["update:modelValue"],setup(c,{emit:V}){var v,u,T,E,k,D,I,U,A,r,F,L,$,j,G,X,H,J,Q,Y,Z,ee,te,le,ae,oe,ie,ne,ue,de,se,re;const{t:a}=Ae.global,t=c,w=["radio","checkbox","select","selects"],e=S({name:{show:((u=(v=t.options)==null?void 0:v.name)==null?void 0:u.show)!==!1,value:t.modelValue.name,title:((E=(T=t.options)==null?void 0:T.name)==null?void 0:E.title)??t.dataTitle+a("utils.Name")},title:{show:((D=(k=t.options)==null?void 0:k.title)==null?void 0:D.show)!==!1,value:t.modelValue.title,title:((U=(I=t.options)==null?void 0:I.title)==null?void 0:U.title)??t.dataTitle+a("utils.Title")},type:{show:((r=(A=t.options)==null?void 0:A.type)==null?void 0:r.show)!==!1,value:t.modelValue.type,title:((L=(F=t.options)==null?void 0:F.type)==null?void 0:L.title)??t.dataTitle+a("utils.type")},tip:{show:((j=($=t.options)==null?void 0:$.tip)==null?void 0:j.show)!==!1,value:t.modelValue.tip,title:((X=(G=t.options)==null?void 0:G.tip)==null?void 0:X.title)??a("utils.Tip")},rule:{show:((J=(H=t.options)==null?void 0:H.rule)==null?void 0:J.show)!==!1,value:t.modelValue.rule,title:((Y=(Q=t.options)==null?void 0:Q.rule)==null?void 0:Y.title)??a("utils.Rule")},extend:{show:((ee=(Z=t.options)==null?void 0:Z.extend)==null?void 0:ee.show)!==!1,value:t.modelValue.extend,title:((le=(te=t.options)==null?void 0:te.extend)==null?void 0:le.title)??"FormItem "+a("utils.Extend")},dict:{show:((oe=(ae=t.options)==null?void 0:ae.dict)==null?void 0:oe.show)!==!1,value:t.modelValue.dict,title:((ne=(ie=t.options)==null?void 0:ie.dict)==null?void 0:ne.title)??a("utils.Dict")},inputExtend:{show:((de=(ue=t.options)==null?void 0:ue.inputExtend)==null?void 0:de.show)!==!1,value:t.modelValue.inputExtend,title:((re=(se=t.options)==null?void 0:se.inputExtend)==null?void 0:re.title)??"Input "+a("utils.Extend")}}),g=S({validators:{},inputTypes:{}}),o=V,s=()=>{o("update:modelValue",{name:e.name.value??"",title:e.title.value??"",type:e.type.value??"",tip:e.tip.value??"",rule:e.rule.value??[],extend:e.extend.value??"",dict:w.includes(e.type.value??"")?e.dict.value??"":"",inputExtend:e.inputExtend.value??""})};return(()=>{let B={};for(const p in M)t.excludeInputTypes.includes(M[p])||(B[M[p]]=M[p]);g.inputTypes=B;let l={};for(const p in Ue)t.excludeValidatorRule.includes(p)||(l[p]=Ue[p]);g.validators=l,s()})(),(B,l)=>{var p,pe,me,fe,ce,ge,ye,Ve,ve,be,he,xe,we,ke,Ce,Te;return d(),Me("div",null,[e.name.show?(d(),m(f,{key:0,label:e.name.title,type:"string",modelValue:e.name.value,"onUpdate:modelValue":l[0]||(l[0]=i=>e.name.value=i),placeholder:n(a)("Please input field",{field:e.name.title}),"input-attr":{onChange:s,...(pe=(p=t.options)==null?void 0:p.name)==null?void 0:pe.inputAttr},prop:"name"},null,8,["label","modelValue","placeholder","input-attr"])):y("",!0),e.title.show?(d(),m(f,{key:1,label:e.title.title,type:"string",modelValue:e.title.value,"onUpdate:modelValue":l[1]||(l[1]=i=>e.title.value=i),placeholder:n(a)("Please input field",{field:e.title.title}),"input-attr":{onChange:s,...(fe=(me=t.options)==null?void 0:me.title)==null?void 0:fe.inputAttr},prop:"title"},null,8,["label","modelValue","placeholder","input-attr"])):y("",!0),e.type.show?(d(),m(f,{key:2,label:e.type.title,type:"select",modelValue:e.type.value,"onUpdate:modelValue":l[2]||(l[2]=i=>e.type.value=i),data:{content:g.inputTypes},placeholder:n(a)("Please select field",{field:e.type.title}),"input-attr":{onChange:s,...(ge=(ce=t.options)==null?void 0:ce.type)==null?void 0:ge.inputAttr},prop:"type"},null,8,["label","modelValue","data","placeholder","input-attr"])):y("",!0),e.dict.show&&w.includes(e.type.value)?(d(),m(f,{key:3,label:e.dict.title,type:"textarea",modelValue:e.dict.value,"onUpdate:modelValue":l[3]||(l[3]=i=>e.dict.value=i),"input-attr":{rows:3,placeholder:n(a)("utils.One line at a time, without quotation marks, for example: key1=value1"),onChange:s,...(Ve=(ye=t.options)==null?void 0:ye.dict)==null?void 0:Ve.inputAttr},prop:"dict",onKeyup:l[4]||(l[4]=_(O(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):y("",!0),e.tip.show?(d(),m(f,{key:4,label:e.tip.title,type:"string",modelValue:e.tip.value,"onUpdate:modelValue":l[5]||(l[5]=i=>e.tip.value=i),placeholder:n(a)("Please input field",{field:e.tip.title}),"input-attr":{onChange:s,...(be=(ve=t.options)==null?void 0:ve.tip)==null?void 0:be.inputAttr},prop:"tip"},null,8,["label","modelValue","placeholder","input-attr"])):y("",!0),e.rule.show?(d(),m(f,{key:5,label:e.rule.title,type:"selects",modelValue:e.rule.value,"onUpdate:modelValue":l[6]||(l[6]=i=>e.rule.value=i),data:{content:g.validators},placeholder:n(a)("Please select field",{field:e.rule.title}),"input-attr":{onChange:s,...(xe=(he=t.options)==null?void 0:he.rule)==null?void 0:xe.inputAttr},prop:"rule"},null,8,["label","modelValue","data","placeholder","input-attr"])):y("",!0),e.extend.show?(d(),m(f,{key:6,label:e.extend.title,type:"textarea",modelValue:e.extend.value,"onUpdate:modelValue":l[7]||(l[7]=i=>e.extend.value=i),"input-attr":{onChange:s,placeholder:n(a)("utils.One attribute per line without quotation marks(formitem)"),...(ke=(we=t.options)==null?void 0:we.extend)==null?void 0:ke.inputAttr},prop:"extend",onKeyup:l[8]||(l[8]=_(O(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):y("",!0),e.inputExtend.show?(d(),m(f,{key:7,label:e.inputExtend.title,type:"textarea",modelValue:e.inputExtend.value,"onUpdate:modelValue":l[9]||(l[9]=i=>e.inputExtend.value=i),"input-attr":{onChange:s,placeholder:n(a)("utils.Extended properties of Input, one line without quotation marks, such as: size=large"),...(Te=(Ce=t.options)==null?void 0:Ce.inputExtend)==null?void 0:Te.inputAttr},prop:"inputExtend",onKeyup:l[10]||(l[10]=_(O(()=>{},["stop"]),["enter"]))},null,8,["label","modelValue","input-attr"])):y("",!0)])}}}),Be={class:"title"},Ge=Pe({__name:"add",props:{modelValue:{type:Boolean,default:!1},configGroup:{default:()=>({})}},emits:["update:modelValue"],setup(c,{emit:V}){const a=qe(),t=V,w=()=>{t("update:modelValue",!1)},{t:e}=_e(),g=Se(),o=S({inputTypes:{},labelWidth:180,submitLoading:!1,addConfig:{group:"",weigh:0,content:""},formItemData:{dict:`key1=value1
key2=value2`}}),s=S({group:[x({name:"required",trigger:"change",message:e("Please select field",{field:e("routine.config.Variable grouping")})})],name:[x({name:"required",title:e("routine.config.Variable name")}),x({name:"varName",message:e("Please enter the correct field",{field:e("routine.config.Variable name")})})],title:[x({name:"required",title:e("routine.config.Variable title")})],type:[x({name:"required",trigger:"change",message:e("Please select field",{field:e("routine.config.Variable type")})})],weigh:[x({name:"integer",title:e("routine.config.number")})]}),K=()=>{g.value&&g.value.validate(v=>{v&&(o.addConfig.content=o.formItemData.dict,delete o.formItemData.dict,Ne("add",{...o.addConfig,...o.formItemData}).then(()=>{t("update:modelValue",!1)}))})};return(v,u)=>{const T=P("el-form"),E=P("el-scrollbar"),k=P("el-button"),D=P("el-dialog"),I=R("drag"),U=R("zoom"),A=R("blur");return d(),m(D,{class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":v.modelValue,onClose:w},{header:b(()=>[Ee((d(),Me("div",Be,[W(z(n(e)("routine.config.Add configuration item")),1)])),[[I,[".ba-operate-dialog",".el-dialog__header"]],[U,".ba-operate-dialog"]])]),footer:b(()=>[De("div",{style:Ie("width: calc(100% - "+o.labelWidth/1.8+"px)")},[h(k,{onClick:w},{default:b(()=>[W(z(n(e)("Cancel")),1)]),_:1}),Ee((d(),m(k,{loading:o.submitLoading,onClick:u[4]||(u[4]=r=>K()),type:"primary"},{default:b(()=>[W(z(n(e)("Add")),1)]),_:1},8,["loading"])),[[A]])],4)]),default:b(()=>[h(E,{class:"ba-table-form-scrollbar"},{default:b(()=>[De("div",{class:"ba-operate-form ba-add-form",style:Ie(n(a).layout.shrink?"":"width: calc(100% - "+o.labelWidth/2+"px)")},[h(T,{ref_key:"formRef",ref:g,onKeyup:u[3]||(u[3]=_(r=>K(),["enter"])),rules:s,model:{...o.addConfig,...o.formItemData},"label-position":n(a).layout.shrink?"top":"right","label-width":160},{default:b(()=>[h(f,{label:n(e)("routine.config.Variable grouping"),type:"select",modelValue:o.addConfig.group,"onUpdate:modelValue":u[0]||(u[0]=r=>o.addConfig.group=r),prop:"group",data:{content:v.configGroup}},null,8,["label","modelValue","data"]),h(Ke,{modelValue:o.formItemData,"onUpdate:modelValue":u[1]||(u[1]=r=>o.formItemData=r)},null,8,["modelValue"]),h(f,{label:n(e)("Weigh"),type:"number",modelValue:o.addConfig.weigh,"onUpdate:modelValue":u[2]||(u[2]=r=>o.addConfig.weigh=r),modelModifiers:{number:!0},prop:"weigh"},null,8,["label","modelValue"])]),_:1},8,["rules","model","label-position"])],4)]),_:1})]),_:1},8,["model-value"])}}});export{Ge as _,je as a,$e as d,Le as i,Ne as p};
