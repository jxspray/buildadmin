import{h as K,w as V,r as L,q as m,X as M,o as p,k as R,m as r,U as a,z as e,p as i,P as d,V as c,O as _,W as b,l as Q,_ as q,a9 as w,a8 as $,Z as j,J as E,a1 as J,a2 as O}from"./vue-69ad5a16.js";import{e as k,s as n,g as H,j as W}from"./crud-7e52b10c.js";import{F as X}from"./index-4042c46c.js";import{b as Y}from"./validate-4db1e214.js";import{_ as Z}from"./log.vue_vue_type_style_index_0_lang-c656a3cd.js";import{w as A,_ as G}from"./index-32d6febb.js";import"./index-afbe03c0.js";import"./index-f98c8d12.js";const ee=f=>(J("data-v-e60908d0"),f=f(),O(),f),te={class:"default-main"},se={class:"crud-title"},ae={class:"start-opt"},re={class:"start-item-title"},le={class:"start-item-remark"},oe={class:"start-item suspension"},de={class:"start-item-title"},ce={class:"start-item-remark"},ie={class:"start-item suspension"},ne={class:"start-item-title"},ue={class:"start-item-remark"},pe={target:"_blank",href:"https://wonderful-code.gitee.io/guide/other/developerMustSee.html"},me=ee(()=>r("code",null,"test_build",-1)),_e={target:"_blank",href:"https://wonderful-code.gitee.io/guide/other/developerMustSee.html"},fe=K({__name:"start",setup(f){const{t}=A(),x=V(),v=V(),l=L({dialog:{type:"",visible:!1,dbList:[]},showLog:!1,loading:!1,successRecord:0}),I=u=>{l.dialog.type=u,l.dialog.visible=!0,u=="sql"?setTimeout(()=>{x.value.focus()},200):u=="db"&&(l.successRecord=0,n.startData.db="",H().then(s=>{l.dialog.dbList=s.data.dbs}))},U=L({db:[Y({name:"required",message:t("crud.crud.Please select a data table")})]}),h=()=>{if(v.value){if(l.dialog.type=="sql"&&!n.startData.sql){E({type:"error",message:t("crud.crud.Please enter the table creation SQL")});return}v.value.validate(u=>{u&&k(l.dialog.type)})}},N=()=>{n.startData.db&&(l.loading=!0,W(n.startData.db).then(u=>{l.successRecord=u.data.id}).finally(()=>{l.loading=!1}))},P=()=>{l.successRecord&&(n.startData.logId=l.successRecord.toString(),k("log"))},B=()=>!1;return(u,s)=>{const g=m("el-col"),D=m("el-row"),S=m("el-alert"),F=m("el-input"),T=m("el-form"),y=m("el-button"),z=m("el-dialog"),C=M("blur");return p(),R("div",te,[r("div",se,a(e(t)("crud.crud.start")),1),r("div",ae,[i(D,{gutter:20},{default:d(()=>[i(g,{xs:24,span:8},{default:d(()=>[r("div",{onClick:s[0]||(s[0]=o=>e(k)("create")),class:"start-item suspension"},[r("div",re,a(e(t)("crud.crud.create")),1),r("div",le,a(e(t)("crud.crud.New background CRUD from zero")),1)])]),_:1}),i(g,{onClick:s[1]||(s[1]=o=>I("db")),xs:24,span:8},{default:d(()=>[r("div",oe,[r("div",de,a(e(t)("crud.crud.Select Data Table")),1),r("div",ce,a(e(t)("crud.crud.Select a designed data table from the database")),1)])]),_:1}),i(g,{onClick:s[2]||(s[2]=o=>l.showLog=!0),xs:24,span:8},{default:d(()=>[r("div",ie,[r("div",ne,a(e(t)("crud.crud.CRUD record")),1),r("div",ue,a(e(t)("crud.crud.Start with previously generated CRUD code")),1)])]),_:1})]),_:1}),i(D,{justify:"center"},{default:d(()=>[i(g,{span:20,class:"ba-markdown crud-tips suspension"},{default:d(()=>[r("b",null,a(e(t)("crud.crud.Fast experience")),1),r("ol",null,[r("li",null,[c(a(e(t)("crud.crud.experience 1 1"))+" ",1),r("a",pe,a(e(t)("crud.crud.experience 1 2")),1),c(" "+a(e(t)("crud.crud.experience 1 3")),1)]),r("li",null,[c(a(e(t)("crud.crud.experience 2 1"))+" ",1),r("code",null,a(e(t)("crud.crud.experience 2 2")),1),c(" "+a(e(t)("crud.crud.experience 2 3")),1),me,c(a(e(t)("crud.crud.data sheet")),1)]),r("li",null,[c(a(e(t)("crud.crud.experience 3 1")),1),r("code",null,a(e(t)("crud.crud.experience 3 2")),1),c(" "+a(e(t)("crud.crud.experience 3 3"))+" ",1),r("code",null,a(e(t)("crud.crud.experience 3 4")),1)])]),B()?b("",!0):(p(),_(S,{key:0,class:"no-dev",type:"warning","show-icon":!0,closable:!1},{title:d(()=>[r("span",null,a(e(t)("crud.crud.experience 4 1")),1),r("a",_e,a(e(t)("crud.crud.experience 4 2")),1),r("span",null,[c(a(e(t)("crud.crud.experience 4 3")),1),r("code",null,a(e(t)("crud.crud.experience 4 4")),1)])]),_:1}))]),_:1})]),_:1}),i(z,{class:"ba-operate-dialog select-db-dialog",modelValue:l.dialog.visible,"onUpdate:modelValue":s[10]||(s[10]=o=>l.dialog.visible=o),title:l.dialog.type=="sql"?e(t)("crud.crud.Please enter SQL"):e(t)("crud.crud.Please select a data table"),"destroy-on-close":!0},{footer:d(()=>[r("div",{style:Q({width:"calc(100% * 0.9)"})},[i(y,{onClick:s[8]||(s[8]=o=>l.dialog.visible=!1)},{default:d(()=>[c(a(u.$t("Cancel")),1)]),_:1}),q((p(),_(y,{loading:l.loading,onClick:s[9]||(s[9]=o=>h()),type:"primary"},{default:d(()=>[c(a(e(t)("Confirm")),1)]),_:1},8,["loading"])),[[C]]),l.successRecord?q((p(),_(y,{key:0,onClick:P,type:"success"},{default:d(()=>[c(a(e(t)("crud.crud.Start with the historical record")),1)]),_:1})),[[C]]):b("",!0)],4)]),default:d(()=>[i(T,{"label-width":140,onKeyup:s[7]||(s[7]=w(o=>h(),["enter"])),class:"select-db-form",ref_key:"formRef",ref:v,model:e(n).startData,rules:U},{default:d(()=>[l.dialog.type=="sql"?(p(),_(F,{key:0,class:"sql-input",prop:"sql",ref_key:"sqlInputRef",ref:x,modelValue:e(n).startData.sql,"onUpdate:modelValue":s[3]||(s[3]=o=>e(n).startData.sql=o),type:"textarea",placeholder:e(t)("crud.crud.table create SQL"),rows:10,onKeyup:[s[4]||(s[4]=w($(()=>{},["stop"]),["enter"])),s[5]||(s[5]=w($(o=>h(),["ctrl"]),["enter"]))]},null,8,["modelValue","placeholder"])):l.dialog.type=="db"?(p(),R(j,{key:1},[(p(),_(X,{label:e(t)("crud.crud.data sheet"),class:"select-db",modelValue:e(n).startData.db,"onUpdate:modelValue":s[6]||(s[6]=o=>e(n).startData.db=o),type:"select",key:JSON.stringify(l.dialog.dbList),placeholder:e(t)("crud.crud.Please select a data table"),data:{content:l.dialog.dbList},attr:{blockHelp:e(t)("crud.crud.data sheet help")},"input-attr":{onChange:N},prop:"db"},null,8,["label","modelValue","placeholder","data","attr","input-attr"])),l.successRecord?(p(),_(S,{key:0,class:"success-record-alert",title:e(t)("crud.crud.The selected table has already generated records You are advised to start with historical records"),"show-icon":!0,closable:!1,type:"warning"},null,8,["title"])):b("",!0)],64)):b("",!0)]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),i(Z,{modelValue:l.showLog,"onUpdate:modelValue":s[11]||(s[11]=o=>l.showLog=o)},null,8,["modelValue"])])])}}});const De=G(fe,[["__scopeId","data-v-e60908d0"]]);export{De as default};
