import{d as N,C as D,y as w,a as d,c as n,b as r,T as _,s as V,R as y,Q as v,u as e,v as k,e as s,t as U,a4 as R,U as W,V as C,S as $,Y as K,ah as L,r as p,X as c}from"./vue-9a46e809.js";import{a as j}from"./index-ae07247d.js";import{F as i}from"./index-a7be6d6a.js";import{_ as q}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-81eda047.js";import"./common-535f3731.js";import"./random-1d7fa280.js";import"./iconfont-76d408a9.js";import"./index-01bed986.js";import"./controllerUrls-941681c3.js";import"./index-e2596456.js";const M={class:"title"},Q=N({__name:"popupForm",setup(X){const b=D(),l=L("baTable"),m=w({catalogExtend:{},fields:[]});l.before={onSubmit:function(f){l.form.items.catalogExtend=m.catalogExtend}},l.after={requestEdit:function(f){let a=[];for(const u in f.res.data.fields)a.push(f.res.data.fields[u]);m.fields=a}};const{t}=j(),S=w({});return(f,a)=>{const u=p("el-tab-pane"),h=p("el-tabs"),P=p("el-form"),E=p("el-scrollbar"),x=p("el-button"),F=p("el-dialog"),I=c("drag"),T=c("zoom"),z=c("loading"),B=c("blur");return d(),n(F,{fullscreen:!0,class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":!!e(l).form.operate,onClose:e(l).toggleForm},{header:r(()=>[_((d(),V("div",M,[y(v(e(l).form.operate?e(t)(e(l).form.operate):""),1)])),[[I,[".ba-operate-dialog",".el-dialog__header"]],[T,".ba-operate-dialog"]])]),footer:r(()=>[k("div",{style:U("width: calc(100% - "+e(l).form.labelWidth/1.8+"px)")},[s(x,{onClick:a[10]||(a[10]=o=>e(l).toggleForm(""))},{default:r(()=>[y(v(e(t)("Cancel")),1)]),_:1}),_((d(),n(x,{loading:e(l).form.submitLoading,onClick:a[11]||(a[11]=o=>e(l).onSubmit(b.value)),type:"primary"},{default:r(()=>[y(v(e(l).form.operateIds&&e(l).form.operateIds.length>1?e(t)("Save and edit next item"):e(t)("Save")),1)]),_:1},8,["loading"])),[[B]])],4)]),default:r(()=>[_((d(),n(E,{class:"ba-table-form-scrollbar"},{default:r(()=>[k("div",{class:K(["ba-operate-form","ba-"+e(l).form.operate+"-form"]),style:U("width: calc(100% - "+e(l).form.labelWidth/2+"px)")},[e(l).form.loading?$("",!0):(d(),n(P,{key:0,ref_key:"formRef",ref:b,onKeyup:a[9]||(a[9]=R(o=>e(l).onSubmit(b.value),["enter"])),model:e(l).form.items,"label-position":"right","label-width":e(l).form.labelWidth+"px",rules:S},{default:r(()=>[s(h,{"tab-position":"left",class:"catalog-tabs"},{default:r(()=>[s(u,{label:e(t)("cms.catalog.base")},{default:r(()=>[s(i,{type:"remoteSelect",label:e(t)("cms.catalog.moduleid"),modelValue:e(l).form.items.moduleid,"onUpdate:modelValue":a[0]||(a[0]=o=>e(l).form.items.moduleid=o),"input-attr":{field:"title","remote-url":"/admin/cms.module/index",placeholder:e(t)("Please select field",{field:e(t)("cms.catalog.moduleid")})}},null,8,["label","modelValue","input-attr"]),s(i,{type:"remoteSelect",label:e(t)("cms.catalog.pid"),modelValue:e(l).form.items.pid,"onUpdate:modelValue":a[1]||(a[1]=o=>e(l).form.items.pid=o),placeholder:e(t)("Click Select"),"input-attr":{params:{isTree:!0},field:"title","remote-url":"/admin/cms.catalog/index"}},null,8,["label","modelValue","placeholder","input-attr"]),s(i,{label:e(t)("cms.catalog.title"),type:"string",modelValue:e(l).form.items.title,"onUpdate:modelValue":a[2]||(a[2]=o=>e(l).form.items.title=o),prop:"title","input-attr":{placeholder:e(t)("Please input field",{field:e(t)("cms.catalog.title")})}},null,8,["label","modelValue","input-attr"]),s(i,{label:e(t)("cms.catalog.description"),type:"textarea",modelValue:e(l).form.items.description,"onUpdate:modelValue":a[3]||(a[3]=o=>e(l).form.items.description=o),prop:"description","input-attr":{rows:3,placeholder:e(t)("Please input field",{field:e(t)("cms.catalog.description")})}},null,8,["label","modelValue","input-attr"]),s(i,{label:e(t)("cms.catalog.weigh"),type:"number",prop:"weigh",modelValue:e(l).form.items.weigh,"onUpdate:modelValue":a[4]||(a[4]=o=>e(l).form.items.weigh=o),modelModifiers:{number:!0},"input-attr":{step:"1",placeholder:e(t)("Please input field",{field:e(t)("cms.catalog.weigh")})}},null,8,["label","modelValue","input-attr"]),s(i,{label:e(t)("cms.catalog.status"),type:"radio",modelValue:e(l).form.items.status,"onUpdate:modelValue":a[5]||(a[5]=o=>e(l).form.items.status=o),prop:"status",data:{content:{0:e(t)("cms.catalog.status 0"),1:e(t)("cms.catalog.status 1")}},"input-attr":{placeholder:e(t)("Please select field",{field:e(t)("cms.catalog.status")})}},null,8,["label","modelValue","data","input-attr"])]),_:1},8,["label"]),s(u,{label:e(t)("cms.catalog.seo")},{default:r(()=>[s(i,{label:e(t)("cms.catalog.seo_title"),type:"string",modelValue:e(l).form.items.seo_title,"onUpdate:modelValue":a[6]||(a[6]=o=>e(l).form.items.seo_title=o),prop:"seo_title","input-attr":{placeholder:e(t)("Please input field",{field:e(t)("cms.catalog.seo_title")})}},null,8,["label","modelValue","input-attr"]),s(i,{label:e(t)("cms.catalog.seo_keywords"),type:"string",modelValue:e(l).form.items.seo_keywords,"onUpdate:modelValue":a[7]||(a[7]=o=>e(l).form.items.seo_keywords=o),prop:"seo_keywords","input-attr":{placeholder:e(t)("Please input field",{field:e(t)("cms.catalog.seo_keywords")})}},null,8,["label","modelValue","input-attr"]),s(i,{label:e(t)("cms.catalog.seo_description"),type:"textarea",modelValue:e(l).form.items.seo_description,"onUpdate:modelValue":a[8]||(a[8]=o=>e(l).form.items.seo_description=o),prop:"seo_description","input-attr":{placeholder:e(t)("Please input field",{field:e(t)("cms.catalog.seo_description")})}},null,8,["label","modelValue","input-attr"])]),_:1},8,["label"]),s(u,{label:e(t)("cms.catalog.extend")},{default:r(()=>[(d(!0),V(C,null,W(m.fields,o=>(d(),V(C,null,[o.type=="text"?(d(),n(i,{key:0,label:o.name,type:"string",modelValue:m.catalogExtend[o.field],"onUpdate:modelValue":g=>m.catalogExtend[o.field]=g,prop:o.field,"input-attr":{placeholder:e(t)("Please input field",{field:o.name})}},null,8,["label","modelValue","onUpdate:modelValue","prop","input-attr"])):(d(),n(i,{key:1,label:o.name,type:o.type,modelValue:m.catalogExtend[o.field],"onUpdate:modelValue":g=>m.catalogExtend[o.field]=g},null,8,["label","type","modelValue","onUpdate:modelValue"]))],64))),256))]),_:1},8,["label"])]),_:1})]),_:1},8,["model","label-width","rules"]))],6)]),_:1})),[[z,e(l).form.loading]])]),_:1},8,["model-value","onClose"])}}});const ae=q(Q,[["__scopeId","data-v-16d0fb1f"]]);export{ae as default};
