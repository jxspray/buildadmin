import{h as z,ar as B,r as L,q as r,X as p,o as n,k as c,p as m,P as s,_ as h,V as i,U as f,z as o,m as t,l as x,O as b,a9 as N,W as _,a1 as T,a2 as W}from"./vue-69ad5a16.js";import{F as y}from"./index-4042c46c.js";import{c as A}from"./modulesdev-04ccece5.js";import{_ as D}from"./index-32d6febb.js";import"./index-afbe03c0.js";import"./index-f98c8d12.js";const w=u=>(T("data-v-f92d585e"),u=u(),W(),u),K={class:"title"},U={key:0,class:"install-tip-box"},F={key:1,class:"install-tip-box"},H=w(()=>t("div",null,[t("span",null,"模块有两种安装模式："),t("p",null,[i("1、完整安装：模块中需要安装至系统的代码文件将"),t("b",null,"复制"),i("到系统之中")]),t("p",null,[i("2、纯净安装：模块中需要安装至系统的代码文件将"),t("b",null,"移动"),i("到系统之中")])],-1)),$=w(()=>t("span",null,"当前模块的安装模式为：",-1)),j=z({__name:"manage",setup(u){const l=B("baTable"),e=L({items:{opt:"install_mode",fun:"install"},rules:{},submitLoading:!1}),g=()=>{e.submitLoading=!0,A({...e.items,uid:l.form.extend.info.uid,mode:l.form.extend.info.install_mode=="full"?"pure":"full"}).then(()=>{l.form.extend.showManage=!1,l.onTableHeaderAction("refresh",{})}).finally(()=>{e.submitLoading=!1})};return(E,a)=>{const k=r("el-form-item"),V=r("el-form"),q=r("el-scrollbar"),v=r("el-button"),C=r("el-dialog"),S=p("drag"),I=p("zoom"),M=p("blur");return n(),c("div",null,[m(C,{class:"ba-operate-dialog manage-operate-dialog","close-on-click-modal":!1,"model-value":o(l).form.extend.showManage,onClose:a[3]||(a[3]=d=>o(l).form.extend.showManage=!1),width:"50%","destroy-on-close":!0},{header:s(()=>[h((n(),c("div",K,[i(" 模块管理 - "+f(o(l).form.extend.info.title),1)])),[[S,[".ba-operate-dialog",".el-dialog__header"]],[I,".ba-operate-dialog"]])]),footer:s(()=>[t("div",{style:x("width: calc(100% - "+o(l).form.labelWidth/1.8+"px)")},[m(v,{onClick:a[2]||(a[2]=d=>o(l).form.extend.showManage=!1)},{default:s(()=>[i("关闭")]),_:1}),h((n(),b(v,{loading:e.submitLoading,onClick:g,type:"primary"},{default:s(()=>[i(" 执行操作 ")]),_:1},8,["loading"])),[[M]])],4)]),default:s(()=>[m(q,{class:"ba-table-form-scrollbar"},{default:s(()=>[t("div",{class:"ba-operate-form",style:x("width: calc(100% - "+o(l).form.labelWidth/2+"px)")},[m(V,{ref:"formRef",onKeyup:N(g,["enter"]),model:e.items,"label-position":"right","label-width":o(l).form.labelWidth+"px",rules:e.rules},{default:s(()=>[m(y,{label:"操作",modelValue:e.items.opt,"onUpdate:modelValue":a[0]||(a[0]=d=>e.items.opt=d),type:"radio",class:"form-item-opts",data:{content:{install_mode:"安装模式切换",install_sql:"安装sql调试",exec_function:"模块核心控制器方法调试"},childrenAttr:{border:!0}}},null,8,["modelValue"]),["install_sql","install_mode"].includes(e.items.opt)?(n(),b(k,{key:0,label:"操作说明"},{default:s(()=>[e.items.opt=="install_sql"?(n(),c("div",U," 点击执行操作将找到模块根目录/install.sql，并执行其中的sql查询（同模块安装时一致，无该文件或查询出错不会抛出异常）。 ")):_("",!0),e.items.opt=="install_mode"?(n(),c("div",F,[H,t("div",null,[$,t("b",null,f(o(l).form.extend.info.install_mode=="full"?"完整":"纯净"),1),t("span",null,"，点击执行操作将切换为"+f(o(l).form.extend.info.install_mode=="full"?"纯净":"完整")+"安装",1)])])):_("",!0)]),_:1})):_("",!0),e.items.opt=="exec_function"?(n(),b(y,{key:1,label:"调用方法",modelValue:e.items.fun,"onUpdate:modelValue":a[1]||(a[1]=d=>e.items.fun=d),type:"select",data:{content:{install:"安装",uninstall:"卸载",enable:"启用",disable:"禁用",update:"更新"},childrenAttr:{border:!0}},attr:{blockHelp:"只调用模块核心控制器内对应方法代码，并不等同于真正的模块安装/卸载等操作（找不到方法不会抛出异常，但代码错误可以抛出异常）"}},null,8,["modelValue"])):_("",!0)]),_:1},8,["onKeyup","model","label-width","rules"])],4)]),_:1})]),_:1},8,["model-value"])])}}});const Q=D(j,[["__scopeId","data-v-f92d585e"]]);export{Q as default};
