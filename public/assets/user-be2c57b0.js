import{h as C,O as I,o as k}from"./common-535f3731.js";import{u as M}from"./memberCenter-cf863e27.js";import{a as S,r as j,g as A}from"./router-7e79b862.js";import{u as B,a as F}from"./index-ae07247d.js";import{d as f,a as i,c as m,b as s,e,a8 as N,u as d,ad as b,r as n,t as v,a6 as $,o as q,z as D,I as H,f as T,W as z}from"./vue-9a46e809.js";import{H as w,A as E,F as x}from"./footer-a4272647.js";import{_ as y}from"./_plugin-vue_export-helper-c27b6911.js";import{m as R}from"./layout-5b8a46b5.js";import"./useDark-1dd13716.js";function O(){return new Promise(l=>{l({type:"continue"})})}const P=f({__name:"main",setup(l){const c=B();return(u,r)=>{const a=n("router-view"),o=n("el-main");return i(),m(o,{class:"layout-main"},{default:s(()=>[e(a,null,{default:s(({Component:t})=>[e(N,{name:d(c).layout.mainAnimation,mode:"out-in"},{default:s(()=>[(i(),m(b(t)))]),_:2},1032,["name"])]),_:1})]),_:1})}}});const U=y(P,[["__scopeId","data-v-bc73de31"]]),W=f({__name:"default",setup(l){return(c,u)=>{const r=n("el-col"),a=n("el-row"),o=n("el-scrollbar"),t=n("el-container");return i(),m(t,{class:"is-vertical"},{default:s(()=>[e(w),e(o,{style:v(d(R)()),ref:"mainScrollbarRef"},{default:s(()=>[e(a,{class:"frontend-footer-brother",justify:"center"},{default:s(()=>[e(r,{class:"user-layouts",span:16,xs:24},{default:s(()=>[e(E,{class:"hidden-sm-and-down"}),e(U)]),_:1})]),_:1}),e(x)]),_:1},8,["style"])]),_:1})}}});const J=y(W,[["__scopeId","data-v-64942115"]]),L=f({__name:"disable",setup(l){return(c,u)=>{const r=n("el-alert"),a=n("el-col"),o=n("el-row"),t=n("el-scrollbar"),_=n("el-container");return i(),m(_,{class:"is-vertical"},{default:s(()=>[e(w),e(t,{style:v(d(R)()),ref:"mainScrollbarRef"},{default:s(()=>[e(o,{class:"frontend-footer-brother",justify:"center"},{default:s(()=>[e(a,{class:"user-layouts",span:16,xs:24},{default:s(()=>[e(r,{center:!0,title:c.$t("Member center disabled"),type:"error"},null,8,["title"])]),_:1})]),_:1}),e(x)]),_:1},8,["style"])]),_:1})}}});const V=y(L,[["__scopeId","data-v-e004cd2e"]]),G={components:{Default:J,Disable:V}},se=f({...G,__name:"user",setup(l){const{t:c}=F(),u=T(),r=z(),a=C(),o=M();return $(t=>{o.setActiveRoute(t)}),q(async()=>{const t=await O();if(t.type!="break"){if(t.type=="reload")return window.location.href=t.url;if(!a.token)return r.push({name:"userLogin"});I().then(_=>{if(_.data.userInfo.refreshToken=a.refreshToken,a.dataFill(_.data.userInfo),_.data.menus){if(S(_.data.menus),t.type=="jump")return r.push(t.url);if(u.params.to){const p=JSON.parse(u.params.to);if(p.path!=k.path){let g=D(p.query)?{}:p.query;j({path:p.path,query:g});return}}let h=A(o.state.viewRoutes);h?r.push({path:h.path}):H({type:"error",message:c("No route found to jump~")})}}),document.body.clientWidth<1024?o.setShrink(!0):o.setShrink(!1)}}),(t,_)=>(i(),m(b(d(o).state.layoutMode)))}});export{se as default};
