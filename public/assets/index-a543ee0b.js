import{u as U,B as re,a as xe,c as Ze,A as he,d as Ie,e as Ge}from"./index-ae07247d.js";import{e as De,S as ne,u as H,a as Ce,z as Je,L as G,A as Ae,B as Qe,p as Ee,r as ke,C as et,m as tt}from"./common-535f3731.js";import{u as we,t as N}from"./terminal-7801ad11.js";import{d as R,a as i,s as $,u as e,S as z,t as le,Q as T,c as x,Y as q,a5 as Y,r as _,U as J,V as D,b as l,e as n,v as m,C as ae,y as X,q as ee,o as j,a6 as ce,f as oe,n as te,E as Re,T as K,a7 as Ne,a8 as Te,a9 as ot,W as Pe,a3 as se,R as I,Z as qe,_ as We,w as Ue,aa as nt,B as Fe,ab as lt,X as Se,ac as at,ad as Be,ae as He,$ as st,af as rt,z as ct}from"./vue-9a46e809.js";import{_ as ut,D as it,a as dt}from"./useDark-1dd13716.js";import{c as mt,o as $e,g as Oe,r as me,s as _t,h as pt}from"./router-7e79b862.js";import{_ as E}from"./_plugin-vue_export-helper-c27b6911.js";import{h as ft}from"./horizontalScroll-2b4beced.js";import{I as vt}from"./index-81eda047.js";import{a as gt,i as yt}from"./index-16f5cd2e.js";import{F as ie}from"./index-a7be6d6a.js";import{u as _e}from"./random-1d7fa280.js";import{m as bt}from"./layout-5b8a46b5.js";import"./index-01bed986.js";import"./memberCenter-cf863e27.js";import"./iconfont-76d408a9.js";import"./controllerUrls-941681c3.js";import"./index-e2596456.js";const ht={class:"layout-logo"},Ct={key:0,class:"logo-img",src:ut,alt:"logo"},kt=R({__name:"logo",setup(v){Y(u=>({"7ccdc331":e(t).layout.layoutMode!="Streamline"?e(t).getColorVal("menuTopBarBackground"):"transparent"}));const t=U(),o=De(),c=function(){t.layout.shrink&&!t.layout.menuCollapse&&mt(),t.setLayout("menuCollapse",!t.layout.menuCollapse),ne.set(re,{layoutMode:t.layout.layoutMode,menuCollapse:t.layout.menuCollapse})};return(u,d)=>{const b=_("Icon");return i(),$("div",ht,[e(t).layout.menuCollapse?z("",!0):(i(),$("img",Ct)),e(t).layout.menuCollapse?z("",!0):(i(),$("div",{key:1,style:le({color:e(t).getColorVal("menuActiveColor")}),class:"website-name"},T(e(o).siteName),5)),e(t).layout.layoutMode!="Streamline"?(i(),x(b,{key:2,onClick:c,name:e(t).layout.menuCollapse?"fa fa-indent":"fa fa-dedent",class:q([e(t).layout.menuCollapse?"unfold":"","fold"]),color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["name","class","color"])):z("",!0)])}}});const Ke=E(kt,[["__scopeId","data-v-2bc92dbe"]]),xt=R({__name:"menuTree",props:{menus:{default:()=>[]}},setup(v){const t=v;Y(c=>({"60e214b9":e(o).getColorVal("menuActiveBackground")}));const o=U();return(c,u)=>{const d=_("Icon"),b=_("menu-tree",!0),g=_("el-sub-menu"),w=_("el-menu-item");return i(!0),$(D,null,J(t.menus,r=>(i(),$(D,null,[r.children&&r.children.length>0?(i(),x(g,{index:r.path,key:r.path},{title:l(()=>{var p,y,s,a;return[n(d,{color:e(o).getColorVal("menuColor"),name:(p=r.meta)!=null&&p.icon?(y=r.meta)==null?void 0:y.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),m("span",null,T((s=r.meta)!=null&&s.title?(a=r.meta)==null?void 0:a.title:c.$t("noTitle")),1)]}),default:l(()=>[n(b,{menus:r.children},null,8,["menus"])]),_:2},1032,["index"])):(i(),x(w,{index:r.path,key:r.path,onClick:p=>e($e)(r)},{default:l(()=>{var p,y,s,a;return[n(d,{color:e(o).getColorVal("menuColor"),name:(p=r.meta)!=null&&p.icon?(y=r.meta)==null?void 0:y.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),m("span",null,T((s=r.meta)!=null&&s.title?(a=r.meta)==null?void 0:a.title:c.$t("noTitle")),1)]}),_:2},1032,["index","onClick"]))],64))),256)}}});const pe=E(xt,[["__scopeId","data-v-c669345e"]]),wt=R({__name:"menuVertical",setup(v){Y(r=>({"1dde85aa":e(b),"72fdaa31":e(t).getColorVal("menuBackground"),b0a765a4:e(t).getColorVal("menuColor"),"4fe2d048":e(t).getColorVal("menuActiveColor")}));const t=U(),o=H(),c=oe(),u=ae(),d=X({defaultActive:""}),b=ee(()=>{let r=0;return t.layout.menuShowTopBar&&(r=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+r)+"px)":"calc(100vh - "+r+"px)"}),g=r=>{d.defaultActive=r.path},w=()=>{te(()=>{var p;let r=document.querySelector(".el-menu.layouts-menu-vertical li.is-active");if(!r)return!1;(p=u.value)==null||p.setScrollTop(r.offsetTop)})};return j(()=>{g(c),w()}),ce(r=>{g(r)}),(r,p)=>{const y=_("el-menu"),s=_("el-scrollbar");return i(),x(s,{ref_key:"verticalMenusRef",ref:u,class:"vertical-menus-scrollbar"},{default:l(()=>[n(y,{class:"layouts-menu-vertical","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":d.defaultActive,collapse:e(t).layout.menuCollapse},{default:l(()=>[n(pe,{menus:e(o).state.tabsViewRoutes},null,8,["menus"])]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}});const Ve=(v,t)=>{for(let o=0;o<t.length;o++){const c=t[o];if(c.path==v||c.children&&c.children.length>0&&Ve(v,c.children))return c}return!1},Tt=R({__name:"menuVerticalChildren",setup(v){Y(r=>({"6cb75450":e(b),"6f812742":e(t).getColorVal("menuBackground"),"08696640":e(t).getColorVal("menuColor"),ba4d584c:e(t).getColorVal("menuActiveColor")}));const t=U(),o=H(),c=oe(),u=ae(),d=X({defaultActive:"",routeChildren:[]}),b=ee(()=>{let r=0;return t.layout.menuShowTopBar&&(r=50),t.layout.layoutMode=="Default"?"calc(100vh - "+(32+r)+"px)":"calc(100vh - "+r+"px)"}),g=r=>{let p=Ve(r.path,o.state.tabsViewRoutes);p?(d.defaultActive=r.path,p.children&&p.children.length>0?d.routeChildren=p.children:d.routeChildren=[p]):d.routeChildren||(d.routeChildren=o.state.tabsViewRoutes)},w=()=>{te(()=>{var p;let r=document.querySelector(".el-menu.layouts-menu-vertical-children li.is-active");if(!r)return!1;(p=u.value)==null||p.setScrollTop(r.offsetTop)})};return j(()=>{g(c),w()}),ce(r=>{g(r)}),(r,p)=>{const y=_("el-menu"),s=_("el-scrollbar");return i(),x(s,{ref_key:"verticalMenusRef",ref:u,class:"children-vertical-menus-scrollbar"},{default:l(()=>[n(y,{class:"layouts-menu-vertical-children","collapse-transition":!1,"unique-opened":e(t).layout.menuUniqueOpened,"default-active":d.defaultActive,collapse:e(t).layout.menuCollapse},{default:l(()=>[d.routeChildren.length>0?(i(),x(pe,{key:0,menus:d.routeChildren},null,8,["menus"])):z("",!0)]),_:1},8,["unique-opened","default-active","collapse"])]),_:1},512)}}});const St=R({name:"layout/aside"}),Bt=R({...St,setup(v){Y(u=>({"4fc65662":e(c)}));const t=U(),o=H(),c=ee(()=>t.menuWidth());return(u,d)=>{const b=_("el-aside");return e(o).state.tabFullScreen?z("",!0):(i(),x(b,{key:0,class:q("layout-aside-"+e(t).layout.layoutMode+" "+(e(t).layout.shrink?"shrink":""))},{default:l(()=>[e(t).layout.menuShowTopBar?(i(),x(Ke,{key:0})):z("",!0),e(t).layout.layoutMode=="Double"?(i(),x(Tt,{key:1})):(i(),x(wt,{key:2}))]),_:1},8,["class"]))}}});const Me=E(Bt,[["__scopeId","data-v-9423bcd6"]]);function Xe(){if(!Re())throw new Error("useCurrentInstance() can only be used inside setup() or functional components!");const{appContext:v}=Re();return{proxy:v.config.globalProperties}}const $t={class:"el-dropdown-menu"},Vt=["onClick"],Mt=R({__name:"index",props:{width:{default:150},items:{default:()=>[]}},emits:["contextmenuItemClick"],setup(v,{expose:t,emit:o}){const c=v,u=X({show:!1,axis:{x:0,y:0},menu:void 0,arrowAxis:10}),d=(w,r)=>{u.menu=w,u.axis=r,u.show=!0},b=w=>{w.disabled||(w.menu=ot(u.menu),o("contextmenuItemClick",w))},g=()=>{u.show=!1};return t({onShowContextmenu:d,onHideContextmenu:g}),j(()=>{Ce(document,"click",g)}),(w,r)=>{const p=_("Icon");return i(),x(Te,{name:"el-zoom-in-center"},{default:l(()=>[K((i(),$("div",{class:"el-popper is-pure is-light el-dropdown__popper ba-contextmenu",style:le(`top: ${u.axis.y+5}px;left: ${u.axis.x-14}px;width:${c.width}px`),key:Math.random(),"aria-hidden":"false","data-popper-placement":"bottom"},[m("ul",$t,[(i(!0),$(D,null,J(c.items,(y,s)=>(i(),$("li",{key:s,class:q(["el-dropdown-menu__item",y.disabled?"is-disabled":""]),tabindex:"-1",onClick:a=>b(y)},[n(p,{size:"12",name:y.icon},null,8,["name"]),m("span",null,T(y.label),1)],10,Vt))),128))]),m("span",{class:"el-popper__arrow",style:le({left:`${u.arrowAxis}px`})},null,4)],4)),[[Ne,u.show]])]),_:1})}}});const It=E(Mt,[["__scopeId","data-v-f1121b30"]]),At=["onClick","onContextmenu"],Rt=R({__name:"tabs",setup(v){Y(f=>({"31b5539f":e(c).getColorVal("headerBarTabColor"),"2e2f7df9":e(c).getColorVal("headerBarTabActiveColor"),"259678a4":e(c).layout.layoutMode=="Default"?"none":e(c).getColorVal("headerBarBackground")}));const t=oe(),o=Pe(),c=U(),u=H(),{proxy:d}=Xe(),b=ae(),g=Je(),w=ae(),r=X({contextmenuItems:[{name:"refresh",label:"重新加载",icon:"fa fa-refresh"},{name:"close",label:"关闭标签",icon:"fa fa-times"},{name:"fullScreen",label:"当前标签全屏",icon:"el-icon-FullScreen"},{name:"closeOther",label:"关闭其他标签",icon:"fa fa-minus"},{name:"closeAll",label:"关闭全部标签",icon:"fa fa-stop"}]}),p=X({width:"0",transform:"translateX(0px)"}),y=f=>{o.push(f)},s=(f,B)=>{r.contextmenuItems[0].disabled=t.path!==f.path,r.contextmenuItems[4].disabled=r.contextmenuItems[3].disabled=u.state.tabsView.length==1;const{clientX:L,clientY:M}=B;w.value.onShowContextmenu(f,{x:L,y:M})},a=function(f){if(!f)return!1;p.width=f.clientWidth+"px",p.transform=`translateX(${f.offsetLeft}px)`;let B=f.offsetLeft+f.clientWidth-b.value.clientWidth;f.offsetLeft<b.value.scrollLeft?b.value.scrollTo(f.offsetLeft,0):B>b.value.scrollLeft&&b.value.scrollTo(B,0)},V=()=>{const f=u.state.tabsView.slice(-1)[0];f?o.push(f.path):o.push("/admin")},W=f=>{var B;u.closeTab(f),d.eventBus.emit("onTabViewClose",f),((B=u.state.activeRoute)==null?void 0:B.path)===f.path?V():(u.setActiveRoute(u.state.activeRoute),te(()=>{a(g.value[u.state.activeIndex])})),w.value.onHideContextmenu()},k=f=>{var B;u.closeTabs(f),u.setActiveRoute(f),((B=u.state.activeRoute)==null?void 0:B.path)!==t.path&&o.push(f.path)},h=f=>{let B=Oe(u.state.tabsViewRoutes);if(B&&B.path==f.path)return k(f);u.closeTabs(!1),B&&me(B.path)},F=async f=>{const{name:B,menu:L}=f;if(L)switch(B){case"refresh":d.eventBus.emit("onTabViewRefresh",L);break;case"close":W(L);break;case"closeOther":k(L);break;case"closeAll":h(L);break;case"fullScreen":t.path!==(L==null?void 0:L.path)&&o.push(L==null?void 0:L.path),u.setFullScreen(!0);break}},A=function(f){u.addTab(f),u.setActiveRoute(f),te(()=>{a(g.value[u.state.activeIndex])})};return ce(async f=>{A(f)}),j(()=>{A(o.currentRoute.value),new ft(b.value)}),(f,B)=>{const L=_("Icon");return i(),$(D,null,[m("div",{class:"nav-tabs",ref_key:"tabScrollbarRef",ref:b},[(i(!0),$(D,null,J(e(u).state.tabsView,(M,Q)=>(i(),$("div",{onClick:P=>y(M),onContextmenu:se(P=>s(M,P),["prevent"]),class:q(["ba-nav-tab",e(u).state.activeIndex==Q?"active":""]),ref_for:!0,ref:e(g).set,key:Q},[I(T(M.meta.title)+" ",1),n(Te,{onAfterLeave:B[0]||(B[0]=P=>a(e(g)[e(u).state.activeIndex])),name:"el-fade-in"},{default:l(()=>[K(n(L,{class:"close-icon",onClick:se(P=>W(M),["stop"]),size:"15",name:"el-icon-Close"},null,8,["onClick"]),[[Ne,e(u).state.tabsView.length>1]])]),_:2},1024)],42,At))),128)),m("div",{style:le(p),class:"nav-tabs-active-box"},null,4)],512),n(It,{ref_key:"contextmenuRef",ref:w,items:r.contextmenuItems,onContextmenuItemClick:F},null,8,["items"])],64)}}});const Ye=E(Rt,[["__scopeId","data-v-1d396a22"]]),ze=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Z=(()=>{if(typeof document>"u")return!1;const v=ze[0],t={};for(const o of ze)if((o==null?void 0:o[1])in document){for(const[u,d]of o.entries())t[v[u]]=d;return t}return!1})(),Le={change:Z.fullscreenchange,error:Z.fullscreenerror};let O={request(v=document.documentElement,t){return new Promise((o,c)=>{const u=()=>{O.off("change",u),o()};O.on("change",u);const d=v[Z.requestFullscreen](t);d instanceof Promise&&d.then(u).catch(c)})},exit(){return new Promise((v,t)=>{if(!O.isFullscreen){v();return}const o=()=>{O.off("change",o),v()};O.on("change",o);const c=document[Z.exitFullscreen]();c instanceof Promise&&c.then(o).catch(t)})},toggle(v,t){return O.isFullscreen?O.exit():O.request(v,t)},onchange(v){O.on("change",v)},onerror(v){O.on("error",v)},on(v,t){const o=Le[v];o&&document.addEventListener(o,t,!1)},off(v,t){const o=Le[v];o&&document.removeEventListener(o,t,!1)},raw:Z};Object.defineProperties(O,{isFullscreen:{get:()=>Boolean(document[Z.fullscreenElement])},element:{enumerable:!0,get:()=>document[Z.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>Boolean(document[Z.fullscreenEnabled])}});Z||(O={isEnabled:!1});const de=O,fe=v=>(qe("data-v-bac0a267"),v=v(),We(),v),Ft={class:"layout-config-drawer"},zt={class:"layout-mode-styles-box"},Lt={class:"layout-mode-box-style"},Dt=fe(()=>m("div",{class:"layout-mode-style-box"},[m("div",{class:"layout-mode-style-aside"}),m("div",{class:"layout-mode-style-container-box"},[m("div",{class:"layout-mode-style-header"}),m("div",{class:"layout-mode-style-container"})])],-1)),Et={class:"layout-mode-style-name"},Nt=fe(()=>m("div",{class:"layout-mode-style-box"},[m("div",{class:"layout-mode-style-aside"}),m("div",{class:"layout-mode-style-container-box"},[m("div",{class:"layout-mode-style-header"}),m("div",{class:"layout-mode-style-container"})])],-1)),Pt={class:"layout-mode-style-name"},qt=fe(()=>m("div",{class:"layout-mode-style-box"},[m("div",{class:"layout-mode-style-container-box"},[m("div",{class:"layout-mode-style-header"}),m("div",{class:"layout-mode-style-container"})])],-1)),Wt={class:"layout-mode-style-name"},Ut=fe(()=>m("div",{class:"layout-mode-style-box"},[m("div",{class:"layout-mode-style-aside"}),m("div",{class:"layout-mode-style-container-box"},[m("div",{class:"layout-mode-style-header"}),m("div",{class:"layout-mode-style-container"})])],-1)),Ht={class:"layout-mode-style-name"},Ot={class:"layout-config-global"},Kt={class:"layout-config-aside"},Xt={class:"layout-config-aside"},Yt={class:"ba-center"},jt=R({__name:"config",setup(v){const{t}=xe(),o=U(),c=H(),u=Pe(),d=(y,s)=>{o.setLayout(s,y)},b=(y,s)=>{if(y===null)return;const a=o.layout[s];o.layout.isDark?a[1]=y:a[0]=y,o.setLayout(s,a)},g=y=>{ne.set(re,{layoutMode:y,menuCollapse:o.layout.menuCollapse}),o.setLayoutMode(y)},w=(y,s)=>{o.setLayout(s,y);const a=c.state.tabsViewRoutes;c.setTabsViewRoutes([]),setTimeout(()=>{c.setTabsViewRoutes(a)},200)},r=()=>{o.setLayout("showDrawer",!1)},p=()=>{G.remove(Ze),ne.remove(re),u.go(0)};return(y,s)=>{const a=_("el-divider"),V=_("el-col"),W=_("el-row"),k=_("el-form-item"),h=_("el-option"),F=_("el-select"),A=_("el-color-picker"),f=_("el-switch"),B=_("el-input"),L=_("el-button"),M=_("el-popconfirm"),Q=_("el-form"),P=_("el-scrollbar"),C=_("el-drawer");return i(),$("div",Ft,[n(C,{"model-value":e(o).layout.showDrawer,title:e(t)("layouts.Layout configuration"),size:"310px",onClose:r},{default:l(()=>[n(P,{class:"layout-mode-style-scrollbar"},{default:l(()=>[n(Q,{ref:"formRef",model:e(o).layout},{default:l(()=>[m("div",zt,[n(a,{"border-style":"dashed"},{default:l(()=>[I(T(e(t)("layouts.Layout mode")),1)]),_:1}),m("div",Lt,[n(W,{class:"layout-mode-box-style-row",gutter:10},{default:l(()=>[n(V,{span:12},{default:l(()=>[m("div",{onClick:s[0]||(s[0]=S=>g("Default")),class:q(["layout-mode-style default",e(o).layout.layoutMode=="Default"?"active":""])},[Dt,m("div",Et,T(e(t)("layouts.default")),1)],2)]),_:1}),n(V,{span:12},{default:l(()=>[m("div",{onClick:s[1]||(s[1]=S=>g("Classic")),class:q(["layout-mode-style classic",e(o).layout.layoutMode=="Classic"?"active":""])},[Nt,m("div",Pt,T(e(t)("layouts.classic")),1)],2)]),_:1})]),_:1}),n(W,{gutter:10},{default:l(()=>[n(V,{span:12},{default:l(()=>[m("div",{onClick:s[2]||(s[2]=S=>g("Streamline")),class:q(["layout-mode-style streamline",e(o).layout.layoutMode=="Streamline"?"active":""])},[qt,m("div",Wt,T(e(t)("layouts.Single column")),1)],2)]),_:1}),n(V,{span:12},{default:l(()=>[m("div",{onClick:s[3]||(s[3]=S=>g("Double")),class:q(["layout-mode-style double",e(o).layout.layoutMode=="Double"?"active":""])},[Ut,m("div",Ht,T(e(t)("layouts.Double column")),1)],2)]),_:1})]),_:1})]),n(a,{"border-style":"dashed"},{default:l(()=>[I(T(e(t)("layouts.overall situation")),1)]),_:1}),m("div",Ot,[n(k,{size:"large",label:e(t)("layouts.Dark mode")},{default:l(()=>[n(it,{onClick:s[4]||(s[4]=S=>e(dt)())})]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Background page switching animation")},{default:l(()=>[n(F,{onChange:s[5]||(s[5]=S=>d(S,"mainAnimation")),"model-value":e(o).layout.mainAnimation,placeholder:e(t)("layouts.Please select an animation name")},{default:l(()=>[n(h,{label:"slide-right",value:"slide-right"}),n(h,{label:"slide-left",value:"slide-left"}),n(h,{label:"el-fade-in-linear",value:"el-fade-in-linear"}),n(h,{label:"el-fade-in",value:"el-fade-in"}),n(h,{label:"el-zoom-in-center",value:"el-zoom-in-center"}),n(h,{label:"el-zoom-in-top",value:"el-zoom-in-top"}),n(h,{label:"el-zoom-in-bottom",value:"el-zoom-in-bottom"})]),_:1},8,["model-value","placeholder"])]),_:1},8,["label"])]),n(a,{"border-style":"dashed"},{default:l(()=>[I(T(e(t)("layouts.sidebar")),1)]),_:1}),m("div",Kt,[n(k,{label:e(t)("layouts.Side menu bar background color")},{default:l(()=>[n(A,{onChange:s[6]||(s[6]=S=>b(S,"menuBackground")),"model-value":e(o).getColorVal("menuBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Side menu text color")},{default:l(()=>[n(A,{onChange:s[7]||(s[7]=S=>b(S,"menuColor")),"model-value":e(o).getColorVal("menuColor")},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Side menu active item background color")},{default:l(()=>[n(A,{onChange:s[8]||(s[8]=S=>b(S,"menuActiveBackground")),"model-value":e(o).getColorVal("menuActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Side menu active item text color")},{default:l(()=>[n(A,{onChange:s[9]||(s[9]=S=>b(S,"menuActiveColor")),"model-value":e(o).getColorVal("menuActiveColor")},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Show side menu top bar (logo bar)")},{default:l(()=>[n(f,{onChange:s[10]||(s[10]=S=>d(S,"menuShowTopBar")),"model-value":e(o).layout.menuShowTopBar},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Side menu top bar background color")},{default:l(()=>[n(A,{onChange:s[11]||(s[11]=S=>b(S,"menuTopBarBackground")),"model-value":e(o).getColorVal("menuTopBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Side menu width (when expanded)")},{default:l(()=>[n(B,{onInput:s[12]||(s[12]=S=>d(S,"menuWidth")),type:"number",step:10,"model-value":e(o).layout.menuWidth},{append:l(()=>[I("px")]),_:1},8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Side menu default icon")},{default:l(()=>[n(vt,{onChange:s[13]||(s[13]=S=>w(S,"menuDefaultIcon")),"model-value":e(o).layout.menuDefaultIcon},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Side menu horizontal collapse")},{default:l(()=>[n(f,{onChange:s[14]||(s[14]=S=>d(S,"menuCollapse")),"model-value":e(o).layout.menuCollapse},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Side menu accordion")},{default:l(()=>[n(f,{onChange:s[15]||(s[15]=S=>d(S,"menuUniqueOpened")),"model-value":e(o).layout.menuUniqueOpened},null,8,["model-value"])]),_:1},8,["label"])]),n(a,{"border-style":"dashed"},{default:l(()=>[I(T(e(t)("layouts.Top bar")),1)]),_:1}),m("div",Xt,[n(k,{label:e(t)("layouts.Top bar background color")},{default:l(()=>[n(A,{onChange:s[16]||(s[16]=S=>b(S,"headerBarBackground")),"model-value":e(o).getColorVal("headerBarBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Top bar text color")},{default:l(()=>[n(A,{onChange:s[17]||(s[17]=S=>b(S,"headerBarTabColor")),"model-value":e(o).getColorVal("headerBarTabColor")},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Background color when hovering over the top bar")},{default:l(()=>[n(A,{onChange:s[18]||(s[18]=S=>b(S,"headerBarHoverBackground")),"model-value":e(o).getColorVal("headerBarHoverBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Top bar menu active item background color")},{default:l(()=>[n(A,{onChange:s[19]||(s[19]=S=>b(S,"headerBarTabActiveBackground")),"model-value":e(o).getColorVal("headerBarTabActiveBackground")},null,8,["model-value"])]),_:1},8,["label"]),n(k,{label:e(t)("layouts.Top bar menu active item text color")},{default:l(()=>[n(A,{onChange:s[20]||(s[20]=S=>b(S,"headerBarTabActiveColor")),"model-value":e(o).getColorVal("headerBarTabActiveColor")},null,8,["model-value"])]),_:1},8,["label"])]),n(M,{onConfirm:p,title:e(t)("layouts.Are you sure you want to restore all configurations to the default values?")},{reference:l(()=>[m("div",Yt,[n(L,{class:"w80",type:"info"},{default:l(()=>[I(T(e(t)("layouts.Restore default")),1)]),_:1})])]),_:1},8,["title"])])]),_:1},8,["model"])]),_:1})]),_:1},8,["model-value","title"])])}}});const Zt=E(jt,[["__scopeId","data-v-bac0a267"]]),Gt={class:"command"},Jt={class:"task-opt"},Qt=["onClick"],eo={class:"indent-2"},to={class:"package-manager-dialog-footer"},oo={class:"config-buttons"},no=R({__name:"index",setup(v){const{t}=xe(),o=we(),c=X({terminalWarning:"",port:o.state.port,menuExpand:document.documentElement.clientWidth>1840}),u=ee(()=>{let s=o.state.port==""?"80":o.state.port;return s=="8000"?"php think run":"php think run -p "+s}),d=ee(()=>{let s=o.state.port==""?"":":"+o.state.port;return"http://localhost"+s+" "+t("terminal.or")+" http://"+t("terminal.Site domain name")+s}),b=s=>{Ae({port:s}).then(a=>{a.code==1?(o.changePort(s),y()):c.port=o.state.port}).catch(()=>{c.port=o.state.port})},g=s=>{let a=t("terminal.unknown"),V="info";switch(s){case N.Waiting:a=t("terminal.Waiting for execution"),V="info";break;case N.Connecting:a=t("terminal.Connecting"),V="warning";break;case N.Executing:a=t("terminal.Executing"),V="warning";break;case N.Success:a=t("terminal.Successful execution"),V="success";break;case N.Failed:a=t("terminal.Execution failed"),V="danger";break;case N.Unknown:a=t("terminal.Unknown execution result"),V="danger";break}return{statusText:a,statusType:V}},w=()=>{lt.confirm(t("terminal.Are you sure you want to republish?"),t("Reminder"),{confirmButtonText:t("Confirm"),cancelButtonText:t("Cancel"),type:"warning"}).then(()=>{o.addTaskPM("web-build")})},r=s=>{Ae({manager:s}).then(a=>{a.code==1&&o.changePackageManager(s)}),o.togglePackageManagerDialog(!1)},p=s=>{c.terminalWarning=s},y=()=>{Qe()!=o.state.port?p(t("terminal.The current terminal is not running under the installation service, and some commands may not be executed")):p("")};return Ue(()=>o.state.port,s=>{s!=c.port&&(c.port=s,y())}),j(()=>{y()}),(s,a)=>{const V=_("el-alert"),W=_("el-tag"),k=_("el-button"),h=_("Icon"),F=_("el-card"),A=_("el-timeline-item"),f=_("el-timeline"),B=_("el-empty"),L=_("el-button-group"),M=_("el-dialog"),Q=_("el-form"),P=Se("blur");return i(),$(D,null,[n(M,nt(s.$attrs,{modelValue:e(o).state.show,"onUpdate:modelValue":a[7]||(a[7]=C=>e(o).state.show=C),title:e(t)("terminal.Terminal"),class:"ba-terminal-dialog","append-to-body":!0}),{default:l(()=>[c.terminalWarning?(i(),x(V,{key:0,class:"terminal-warning-alert",title:c.terminalWarning,type:"error"},null,8,["title"])):z("",!0),e(o).state.taskList.length?(i(),x(f,{key:1},{default:l(()=>[(i(!0),$(D,null,J(e(o).state.taskList,(C,S)=>(i(),x(A,{key:S,class:q(["task-item","task-status-"+C.status]),type:g(C.status).statusType,center:"",timestamp:C.createtime,placement:"top"},{default:l(()=>[n(F,null,{default:l(()=>[m("div",null,[n(W,{type:g(C.status).statusType},{default:l(()=>[I(T(g(C.status).statusText),1)]),_:2},1032,["type"]),(C.status==e(N).Failed||C.status==e(N).Unknown)&&C.blockOnFailure?(i(),x(W,{key:0,class:"block-on-failure-tag",type:"warning"},{default:l(()=>[I(T(e(t)("terminal.Failure to execute this command will block the execution of the queue")),1)]),_:1})):z("",!0),C.status==e(N).Executing||C.status==e(N).Connecting?(i(),x(W,{key:1,class:"block-on-failure-tag",type:"danger"},{default:l(()=>[I(T(e(t)("terminal.Do not refresh the browser")),1)]),_:1})):z("",!0),m("span",Gt,T(C.command),1),m("div",Jt,[C.status==e(N).Failed||C.status==e(N).Unknown?K((i(),x(k,{key:0,title:e(t)("Retry"),size:"small",type:"warning",icon:"el-icon-RefreshRight",circle:"",onClick:ue=>e(o).retryTask(S)},null,8,["title","onClick"])),[[P]]):z("",!0),K(n(k,{onClick:ue=>e(o).delTask(S),title:e(t)("delete"),size:"small",type:"danger",icon:"el-icon-Delete",circle:""},null,8,["onClick","title"]),[[P]])])]),C.status!=e(N).Waiting?(i(),$(D,{key:0},[C.status!=e(N).Connecting&&C.status!=e(N).Executing?(i(),$("div",{key:0,onClick:ue=>e(o).setTaskShowMessage(S),class:"toggle-message-display"},[m("span",null,T(e(t)("terminal.Command run log")),1),n(h,{name:C.showMessage?"el-icon-ArrowUp":"el-icon-ArrowDown",size:"16",color:"#909399"},null,8,["name"])],8,Qt)):z("",!0),C.status==e(N).Connecting||C.status==e(N).Executing||C.status>e(N).Executing&&C.showMessage?(i(),$("div",{key:1,class:q(["exec-message","exec-message-"+C.uuid])},[(i(!0),$(D,null,J(C.message,(ue,je)=>(i(),$("div",{key:je,class:"message-item"},T(ue),1))),128))],2)):z("",!0)],64)):z("",!0)]),_:2},1024)]),_:2},1032,["class","type","timestamp"]))),128))]),_:1})):(i(),x(B,{key:2,"image-size":80,description:e(t)("terminal.No mission yet")},null,8,["description"])),n(L,null,{default:l(()=>[K((i(),x(k,{class:"terminal-menu-item",icon:"el-icon-MagicStick",onClick:a[0]||(a[0]=C=>e(o).addTaskPM("test",!1))},{default:l(()=>[I(T(e(t)("terminal.Test command")),1)]),_:1})),[[P]]),K((i(),x(k,{class:"terminal-menu-item",icon:"el-icon-Download",onClick:a[1]||(a[1]=C=>e(o).addTaskPM("web-install"))},{default:l(()=>[I(T(e(t)("terminal.Install dependent packages")),1)]),_:1})),[[P]]),K((i(),x(k,{class:"terminal-menu-item",icon:"el-icon-Sell",onClick:a[2]||(a[2]=C=>w())},{default:l(()=>[I(T(e(t)("terminal.Republish")),1)]),_:1})),[[P]]),c.menuExpand?(i(),$(D,{key:1},[K((i(),x(k,{class:"terminal-menu-item",icon:"el-icon-Delete",onClick:a[4]||(a[4]=C=>e(o).clearSuccessTask())},{default:l(()=>[I(T(e(t)("terminal.Clean up task list")),1)]),_:1})),[[P]]),K((i(),x(k,{class:"terminal-menu-item",icon:"el-icon-Switch",onClick:a[5]||(a[5]=C=>e(o).togglePackageManagerDialog(!0))},{default:l(()=>[I(T(e(t)("terminal.Package manager"))+" "+T(e(o).state.packageManager.toUpperCase()),1)]),_:1})),[[P]]),K((i(),x(k,{class:"terminal-menu-item",icon:"el-icon-Tools",onClick:a[6]||(a[6]=C=>e(o).toggleConfigDialog())},{default:l(()=>[I(T(e(t)("terminal.Terminal settings")),1)]),_:1})),[[P]])],64)):K((i(),x(k,{key:0,class:"terminal-menu-item",icon:"el-icon-Expand",onClick:a[3]||(a[3]=C=>c.menuExpand=!0)},null,512)),[[P]])]),_:1})]),_:1},16,["modelValue","title"]),n(M,{onClose:a[14]||(a[14]=C=>e(o).togglePackageManagerDialog(!1)),"model-value":e(o).state.showPackageManagerDialog,class:"ba-terminal-dialog",title:e(t)("terminal.Please select package manager"),center:""},{footer:l(()=>[m("div",to,[n(k,{onClick:a[8]||(a[8]=C=>r("npm"))},{default:l(()=>[I("npm")]),_:1}),n(k,{onClick:a[9]||(a[9]=C=>r("cnpm"))},{default:l(()=>[I("cnpm")]),_:1}),n(k,{onClick:a[10]||(a[10]=C=>r("pnpm"))},{default:l(()=>[I("pnpm")]),_:1}),n(k,{onClick:a[11]||(a[11]=C=>r("yarn"))},{default:l(()=>[I("yarn")]),_:1}),n(k,{onClick:a[12]||(a[12]=C=>r("ni"))},{default:l(()=>[I("ni")]),_:1}),n(k,{onClick:a[13]||(a[13]=C=>r("none"))},{default:l(()=>[I(T(e(t)("terminal.I want to execute the command manually")),1)]),_:1})])]),default:l(()=>[m("div",eo,T(e(t)("terminal.Switch package manager title")),1)]),_:1},8,["model-value","title"]),n(M,{onClose:a[19]||(a[19]=C=>e(o).toggleConfigDialog(!1)),"model-value":e(o).state.showConfig,class:"ba-terminal-dialog",title:e(t)("terminal.Terminal settings")},{default:l(()=>[n(Q,{"label-position":"top"},{default:l(()=>[n(ie,{label:e(t)("terminal.Install service port"),modelValue:c.port,"onUpdate:modelValue":a[15]||(a[15]=C=>c.port=C),type:"number","input-attr":{onChange:b},placeholder:e(t)("terminal.The port number to start the installation service (this port needs to be opened for external network access)")},null,8,["label","modelValue","input-attr","placeholder"]),n(ie,{label:e(t)("terminal.Installation service startup command"),modelValue:e(u),"onUpdate:modelValue":a[16]||(a[16]=C=>Fe(u)?u.value=C:null),type:"string","input-attr":{disabled:!0},attr:{"block-help":e(t)("terminal.Please execute this command to start the service (add Su under Linux)")}},null,8,["label","modelValue","attr"]),n(ie,{label:e(t)("terminal.Installation service URL"),modelValue:e(d),"onUpdate:modelValue":a[17]||(a[17]=C=>Fe(d)?d.value=C:null),type:"string","input-attr":{disabled:!0},attr:{"block-help":e(t)("terminal.Please access the site through the installation service URL (except in debug mode)")}},null,8,["label","modelValue","attr"])]),_:1}),n(ie,{label:e(t)("terminal.Clean up successful tasks when starting a new task"),"model-value":e(o).state.automaticCleanupTask,type:"radio",data:{content:{0:e(t)("Disable"),1:e(t)("Enable")},childrenAttr:{border:!0}},"input-attr":{onChange:e(o).changeAutomaticCleanupTask}},null,8,["label","model-value","data","input-attr"]),m("div",oo,[n(k,{onClick:a[18]||(a[18]=C=>e(o).toggleConfigDialog(!1))},{default:l(()=>[I(T(e(t)("terminal.Back to terminal")),1)]),_:1})])]),_:1},8,["model-value","title"])],64)}}});const lo=E(no,[["__scopeId","data-v-0b70a3d1"]]),ao={class:"nav-menu-item"},so=["src"],ro={class:"admin-name"},co={class:"admin-info-base"},uo=["src"],io={class:"admin-info-other"},mo={class:"admin-info-name"},_o={class:"admin-info-lasttime"},po={class:"admin-info-footer"},fo=R({__name:"navMenus",setup(v){Y(s=>({b743457c:e(c).getColorVal("headerBarBackground"),"3b280422":e(c).getColorVal("headerBarTabColor"),"2145da24":e(c).getColorVal("headerBarHoverBackground")}));const{t}=xe(),o=Ee(),c=U(),u=we(),d=X({isFullScreen:!1,currentNavMenu:"",showLayoutDrawer:!1}),b=(s,a)=>{d.currentNavMenu=s?a:""},g=()=>{if(!de.isEnabled)return at.warning(t("layouts.Full screen is not supported")),!1;de.toggle(),de.onchange(()=>{d.isFullScreen=de.isFullscreen})},w=()=>{me({name:"routine/adminInfo"})},r=()=>{gt().then(()=>{G.remove(he),ke.go(0)})},p=s=>{if(s=="storage"||s=="all"){const a=G.get(he),V=G.get(Ie);if(ne.clear(),G.clear(),G.set(he,a),G.set(Ie,V),s=="storage")return}et(s).then(()=>{})},y=s=>{G.set("runMode",s),console.log(ke.currentRoute.value.query)};return(s,a)=>{const V=_("Icon"),W=_("router-link"),k=_("el-dropdown-item"),h=_("el-dropdown-menu"),F=_("el-dropdown"),A=_("el-badge"),f=_("el-avatar"),B=_("el-button"),L=_("el-popover");return i(),$("div",{class:q(["nav-menus",e(c).layout.layoutMode])},[n(W,{class:"h100",target:"_blank",title:e(t)("Home"),to:"/"},{default:l(()=>[m("div",ao,[n(V,{color:e(c).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Monitor",size:"18"},null,8,["color"])])]),_:1},8,["title"]),n(F,{onVisibleChange:a[2]||(a[2]=M=>b(M,"mode")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:l(()=>[n(h,{class:"dropdown-menu-box"},{default:l(()=>[n(k,{key:"运营者模式",onClick:a[0]||(a[0]=M=>y("production"))},{default:l(()=>[I("运营者模式")]),_:1}),n(k,{key:"开发者模式",onClick:a[1]||(a[1]=M=>y("develop"))},{default:l(()=>[I("开发者模式")]),_:1})]),_:1})]),default:l(()=>[m("div",{class:q(["nav-menu-item pt2",d.currentNavMenu=="mode"?"hover":""])},[n(V,{color:e(c).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-lang",size:"18"},null,8,["color"])],2)]),_:1}),n(F,{onVisibleChange:a[3]||(a[3]=M=>b(M,"lang")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:l(()=>[n(h,{class:"dropdown-menu-box"},{default:l(()=>[(i(!0),$(D,null,J(e(c).lang.langArray,M=>(i(),x(k,{key:M.name,onClick:Q=>e(Ge)(M.name)},{default:l(()=>[I(T(M.value),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:l(()=>[m("div",{class:q(["nav-menu-item pt2",d.currentNavMenu=="lang"?"hover":""])},[n(V,{color:e(c).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-lang",size:"18"},null,8,["color"])],2)]),_:1}),m("div",{onClick:g,class:q(["nav-menu-item",d.isFullScreen?"hover":""])},[d.isFullScreen?(i(),x(V,{key:0,color:e(c).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-full-screen-cancel",size:"18"},null,8,["color"])):(i(),x(V,{key:1,color:e(c).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-FullScreen",size:"18"},null,8,["color"]))],2),e(o).super?(i(),$("div",{key:0,onClick:a[4]||(a[4]=M=>e(u).toggle()),class:"nav-menu-item pt2"},[n(A,{"is-dot":e(u).state.showDot},{default:l(()=>[n(V,{color:e(c).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"local-terminal",size:"26"},null,8,["color"])]),_:1},8,["is-dot"])])):z("",!0),e(o).super?(i(),x(F,{key:1,onVisibleChange:a[8]||(a[8]=M=>b(M,"clear")),class:"h100",size:"large","hide-timeout":50,placement:"bottom",trigger:"click","hide-on-click":!0},{dropdown:l(()=>[n(h,{class:"dropdown-menu-box"},{default:l(()=>[n(k,{onClick:a[5]||(a[5]=M=>p("tp"))},{default:l(()=>[I(T(e(t)("utils.Clean up system cache")),1)]),_:1}),n(k,{onClick:a[6]||(a[6]=M=>p("storage"))},{default:l(()=>[I(T(e(t)("utils.Clean up browser cache")),1)]),_:1}),n(k,{onClick:a[7]||(a[7]=M=>p("all")),divided:""},{default:l(()=>[I(T(e(t)("utils.Clean up all cache")),1)]),_:1})]),_:1})]),default:l(()=>[m("div",{class:q(["nav-menu-item",d.currentNavMenu=="clear"?"hover":""])},[n(V,{color:e(c).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"el-icon-Delete",size:"18"},null,8,["color"])],2)]),_:1})):z("",!0),n(L,{onShow:a[9]||(a[9]=M=>b(!0,"adminInfo")),onHide:a[10]||(a[10]=M=>b(!1,"adminInfo")),placement:"bottom-end","hide-after":0,width:260,trigger:"click","popper-class":"admin-info-box"},{reference:l(()=>[m("div",{class:q(["admin-info",d.currentNavMenu=="adminInfo"?"hover":""])},[n(f,{size:25,fit:"fill"},{default:l(()=>[m("img",{src:e(o).avatar,alt:""},null,8,so)]),_:1}),m("div",ro,T(e(o).nickname),1)],2)]),default:l(()=>[m("div",null,[m("div",co,[n(f,{size:70,fit:"fill"},{default:l(()=>[m("img",{src:e(o).avatar,alt:""},null,8,uo)]),_:1}),m("div",io,[m("div",mo,T(e(o).nickname),1),m("div",_o,T(e(o).lastlogintime),1)])]),m("div",po,[n(B,{onClick:w,type:"primary",plain:""},{default:l(()=>[I(T(e(t)("layouts.personal data")),1)]),_:1}),n(B,{onClick:r,type:"danger",plain:""},{default:l(()=>[I(T(e(t)("layouts.cancellation")),1)]),_:1})])])]),_:1}),m("div",{onClick:a[11]||(a[11]=M=>e(c).setLayout("showDrawer",!0)),class:"nav-menu-item"},[n(V,{color:e(c).getColorVal("headerBarTabColor"),class:"nav-menu-icon",name:"fa fa-cogs",size:"18"},null,8,["color"])]),n(Zt),n(lo)],2)}}});const ve=E(fo,[["__scopeId","data-v-75bd0afe"]]),vo={class:"nav-bar"},go=R({__name:"default",setup(v){Y(o=>({"341e91f0":e(t).getColorVal("headerBarTabColor"),"7d0afb8a":e(t).getColorVal("headerBarTabActiveColor"),"5eccd556":e(t).getColorVal("headerBarTabActiveBackground")}));const t=U();return(o,c)=>(i(),$("div",vo,[n(Ye),n(ve)]))}});const yo=E(go,[["__scopeId","data-v-8d90b156"]]),bo={class:"nav-bar"},ho={key:0,class:"unfold"},Co=R({__name:"classic",setup(v){Y(c=>({"88b2895c":e(t).getColorVal("headerBarBackground"),"6a10a632":e(t).getColorVal("headerBarTabColor"),d50d5368:e(t).getColorVal("headerBarTabActiveColor"),"4c5473d8":e(t).getColorVal("headerBarHoverBackground"),a7c0b85a:e(t).getColorVal("headerBarTabActiveBackground")}));const t=U(),o=()=>{_t("ba-aside-menu-shade",()=>{t.setLayout("menuCollapse",!0)}),t.setLayout("menuCollapse",!1)};return(c,u)=>{const d=_("Icon");return i(),$("div",bo,[e(t).layout.shrink&&e(t).layout.menuCollapse?(i(),$("div",ho,[n(d,{onClick:o,name:"fa fa-indent",color:e(t).getColorVal("menuActiveColor"),size:"18"},null,8,["color"])])):z("",!0),e(t).layout.shrink?z("",!0):(i(),x(Ye,{key:1})),n(ve)])}}});const ko=E(Co,[["__scopeId","data-v-af750839"]]),xo={class:"layouts-menu-horizontal"},wo={key:0,class:"menu-horizontal-logo"},To=R({__name:"menuHorizontal",setup(v){Y(r=>({c2a66510:e(o).getColorVal("headerBarHoverBackground"),"29760f01":e(o).getColorVal("menuBackground"),"07c7b344":e(o).getColorVal("menuColor"),68770578:e(o).getColorVal("menuActiveColor"),"1a6c9027":e(o).getColorVal("menuActiveBackground")}));const t=ae(),o=U(),c=H(),u=oe(),d=X({menuKey:_e(),defaultActive:""}),b=ee(()=>(d.menuKey=_e(),c.state.tabsViewRoutes)),g=r=>{d.defaultActive=r.path},w=()=>{te(()=>{var p;let r=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!r)return!1;(p=t.value)==null||p.setScrollTop(r.offsetTop)})};return j(()=>{g(u),w()}),ce(r=>{g(r)}),(r,p)=>{const y=_("Icon"),s=_("el-sub-menu"),a=_("el-menu-item"),V=_("el-menu"),W=_("el-scrollbar"),k=Se("blur");return i(),$("div",xo,[e(o).layout.menuShowTopBar?(i(),$("div",wo,[n(Ke)])):z("",!0),n(W,{ref_key:"horizontalMenusRef",ref:t,class:"horizontal-menus-scrollbar"},{default:l(()=>[(i(),x(V,{class:"menu-horizontal",mode:"horizontal","default-active":d.defaultActive,key:d.menuKey},{default:l(()=>[(i(!0),$(D,null,J(e(b),h=>(i(),$(D,null,[h.children&&h.children.length>0?(i(),x(s,{index:h.path,key:h.path},{title:l(()=>{var F,A,f,B;return[n(y,{color:e(o).getColorVal("menuColor"),name:(F=h.meta)!=null&&F.icon?(A=h.meta)==null?void 0:A.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),m("span",null,T((f=h.meta)!=null&&f.title?(B=h.meta)==null?void 0:B.title:r.$t("noTitle")),1)]}),default:l(()=>[n(pe,{menus:h.children},null,8,["menus"])]),_:2},1032,["index"])):K((i(),x(a,{index:h.path,key:h.path,onClick:F=>e($e)(h)},{default:l(()=>{var F,A,f,B;return[n(y,{color:e(o).getColorVal("menuColor"),name:(F=h.meta)!=null&&F.icon?(A=h.meta)==null?void 0:A.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),m("span",null,T((f=h.meta)!=null&&f.title?(B=h.meta)==null?void 0:B.title:r.$t("noTitle")),1)]}),_:2},1032,["index","onClick"])),[[k]])],64))),256))]),_:1},8,["default-active"]))]),_:1},512),n(ve)])}}});const So=E(To,[["__scopeId","data-v-0db0671c"]]),Bo={class:"layouts-menu-horizontal-double"},$o=R({__name:"double",setup(v){Y(r=>({"6855c472":e(o).getColorVal("menuBackground"),ebd71850:e(o).getColorVal("menuColor"),"11f9cf72":e(o).getColorVal("menuActiveColor"),"8a4a1b26":e(o).getColorVal("menuActiveBackground")}));const t=ae(),o=U(),c=H(),u=oe(),d=X({menuKey:_e(),defaultActive:""}),b=ee(()=>(d.menuKey=_e(),c.state.tabsViewRoutes)),g=r=>{Ve(r.path,c.state.tabsViewRoutes)&&(d.defaultActive=r.path)},w=()=>{te(()=>{var p;let r=document.querySelector(".el-menu.menu-horizontal li.is-active");if(!r)return!1;(p=t.value)==null||p.setScrollTop(r.offsetTop)})};return j(()=>{g(u),w()}),ce(r=>{g(r)}),(r,p)=>{const y=_("Icon"),s=_("el-sub-menu"),a=_("el-menu-item"),V=_("el-menu"),W=_("el-scrollbar"),k=Se("blur");return i(),$("div",Bo,[n(W,{ref_key:"horizontalMenusRef",ref:t,class:"double-menus-scrollbar"},{default:l(()=>[(i(),x(V,{class:"menu-horizontal",mode:"horizontal","default-active":d.defaultActive,key:d.menuKey},{default:l(()=>[(i(!0),$(D,null,J(e(b),h=>(i(),$(D,null,[h.children&&h.children.length>0?(i(),x(s,{index:h.path,key:h.path},{title:l(()=>{var F,A,f,B;return[n(y,{color:e(o).getColorVal("menuColor"),name:(F=h.meta)!=null&&F.icon?(A=h.meta)==null?void 0:A.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),m("span",null,T((f=h.meta)!=null&&f.title?(B=h.meta)==null?void 0:B.title:r.$t("noTitle")),1)]}),default:l(()=>[n(pe,{menus:h.children},null,8,["menus"])]),_:2},1032,["index"])):K((i(),x(a,{index:h.path,key:h.path,onClick:F=>e($e)(h)},{default:l(()=>{var F,A,f,B;return[n(y,{color:e(o).getColorVal("menuColor"),name:(F=h.meta)!=null&&F.icon?(A=h.meta)==null?void 0:A.icon:e(o).layout.menuDefaultIcon},null,8,["color","name"]),m("span",null,T((f=h.meta)!=null&&f.title?(B=h.meta)==null?void 0:B.title:r.$t("noTitle")),1)]}),_:2},1032,["index","onClick"])),[[k]])],64))),256))]),_:1},8,["default-active"]))]),_:1},512),n(ve)])}}});const Vo=E($o,[["__scopeId","data-v-e13c3343"]]),Mo=R({name:"layout/header",components:{DefaultNavBar:yo,ClassicNavBar:ko,StreamlineNavBar:So,DoubleNavBar:Vo}}),Io=R({...Mo,setup(v){const t=U(),o=H();return(c,u)=>{const d=_("el-header");return e(o).state.tabFullScreen?z("",!0):(i(),x(d,{key:0,class:"layout-header"},{default:l(()=>[(i(),x(Be(e(t).layout.layoutMode+"NavBar")))]),_:1}))}}});const ge=E(Io,[["__scopeId","data-v-854c4aa8"]]),Ao=R({name:"layout/main"}),Ro=R({...Ao,setup(v){const{proxy:t}=Xe(),o=oe(),c=U(),u=H(),d=X({componentKey:o.path,keepAliveComponentNameList:[]}),b=function(g){if(g){if(d.keepAliveComponentNameList.find(r=>r===g))return;d.keepAliveComponentNameList.push(g)}};return He(()=>{t.eventBus.on("onTabViewRefresh",g=>{d.keepAliveComponentNameList=d.keepAliveComponentNameList.filter(w=>g.meta.keepalive!==w),d.componentKey="",te(()=>{d.componentKey=g.path,b(g.meta.keepalive)})}),t.eventBus.on("onTabViewClose",g=>{d.keepAliveComponentNameList=d.keepAliveComponentNameList.filter(w=>g.meta.keepalive!==w)})}),st(()=>{t.eventBus.off("onTabViewRefresh"),t.eventBus.off("onTabViewClose")}),j(()=>{var g,w;typeof((g=u.state.activeRoute)==null?void 0:g.meta.keepalive)=="string"&&b((w=u.state.activeRoute)==null?void 0:w.meta.keepalive)}),Ue(()=>o.path,()=>{var g,w;d.componentKey=o.path,typeof((g=u.state.activeRoute)==null?void 0:g.meta.keepalive)=="string"&&b((w=u.state.activeRoute)==null?void 0:w.meta.keepalive)}),(g,w)=>{const r=_("router-view"),p=_("el-scrollbar"),y=_("el-main");return i(),x(y,{class:"layout-main"},{default:l(()=>[n(p,{class:"layout-main-scrollbar",style:le(e(bt)()),ref:"mainScrollbarRef"},{default:l(()=>[n(r,null,{default:l(({Component:s})=>[n(Te,{name:e(c).layout.mainAnimation,mode:"out-in"},{default:l(()=>[(i(),x(rt,{include:d.keepAliveComponentNameList},[(i(),x(Be(s),{key:d.componentKey}))],1032,["include"]))]),_:2},1032,["name"])]),_:1})]),_:1},8,["style"])]),_:1})}}});const ye=E(Ro,[["__scopeId","data-v-1af00f4e"]]),Fo=v=>(qe("data-v-0aa634f1"),v=v(),We(),v),zo=["title","onMouseover","onMouseout"],Lo=["onClick"],Do=Fo(()=>m("div",{class:"close-full-screen-on"},null,-1)),Eo=R({__name:"closeFullScreen",setup(v){const t=H(),o=X({closeBoxTop:20});j(()=>{setTimeout(()=>{o.closeBoxTop=-30},300)});const c=()=>{o.closeBoxTop=20},u=()=>{o.closeBoxTop=-30},d=()=>{t.setFullScreen(!1)};return(b,g)=>{const w=_("Icon");return i(),$("div",{title:b.$t("layouts.Exit full screen"),onMouseover:se(c,["stop"]),onMouseout:se(u,["stop"])},[m("div",{onClick:se(d,["stop"]),class:"close-full-screen",style:le({top:o.closeBoxTop+"px"})},[n(w,{name:"el-icon-Close"})],12,Lo),Do],40,zo)}}});const be=E(Eo,[["__scopeId","data-v-0aa634f1"]]),No=R({__name:"default",setup(v){const t=H();return(o,c)=>{const u=_("el-container");return i(),$(D,null,[n(u,{class:"layout-container"},{default:l(()=>[n(Me),n(u,{class:"content-wrapper"},{default:l(()=>[n(ge),n(ye)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),x(be,{key:0})):z("",!0)],64)}}});const Po=E(No,[["__scopeId","data-v-59d252c1"]]),qo=R({__name:"classic",setup(v){const t=H();return(o,c)=>{const u=_("el-container");return i(),$(D,null,[n(u,{class:"layout-container"},{default:l(()=>[n(Me),n(u,{class:"content-wrapper"},{default:l(()=>[n(ge),n(ye)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),x(be,{key:0})):z("",!0)],64)}}});const Wo=E(qo,[["__scopeId","data-v-fb349671"]]),Uo=R({__name:"streamline",setup(v){const t=H();return(o,c)=>{const u=_("el-container");return i(),$(D,null,[n(u,{class:"layout-container"},{default:l(()=>[n(u,{class:"content-wrapper"},{default:l(()=>[n(ge),n(ye)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),x(be,{key:0})):z("",!0)],64)}}});const Ho=E(Uo,[["__scopeId","data-v-fcdc1bd3"]]),Oo=R({__name:"double",setup(v){const t=H();return(o,c)=>{const u=_("el-container");return i(),$(D,null,[n(u,{class:"layout-container"},{default:l(()=>[n(Me),n(u,{class:"content-wrapper"},{default:l(()=>[n(ge),n(ye)]),_:1})]),_:1}),e(t).state.tabFullScreen?(i(),x(be,{key:0})):z("",!0)],64)}}});const Ko=E(Oo,[["__scopeId","data-v-d08319bd"]]),Xo={components:{Default:Po,Classic:Wo,Streamline:Ho,Double:Ko}},_n=R({...Xo,__name:"index",setup(v){const t=we(),o=H(),c=U(),u=oe(),d=De(),b=Ee();j(()=>{if(!b.token)return ke.push({name:"adminLogin"});g(),r(),Ce(window,"resize",r)}),He(()=>{w(),Ce(window,"resize",w)});const g=()=>{yt().then(p=>{if(d.dataFill(p.data.siteConfig),t.changePort(p.data.terminal.installServicePort),t.changePackageManager(p.data.terminal.npmPackageManager),b.dataFill(p.data.adminInfo),p.data.menus){if(pt(p.data.menus),u.params.to){const s=JSON.parse(u.params.to);if(s.path!=tt.path){let a=ct(s.query)?{}:s.query;me({path:s.path,query:a});return}}let y=Oe(o.state.tabsViewRoutes);y&&me(y.path)}})},w=()=>{let p={layoutMode:c.layout.layoutMode,menuCollapse:c.layout.menuCollapse},y=ne.get(re);if(y||ne.set(re,p),document.body.clientWidth<1024)c.setLayout("menuCollapse",!0),c.setLayout("shrink",!0),c.setLayoutMode("Classic");else{let a=y||p;c.setLayout("menuCollapse",a.menuCollapse),c.setLayout("shrink",!1),c.setLayoutMode(a.layoutMode)}},r=()=>{const p=document.querySelector(".nav-tabs");if(!p)return;const y=document.querySelector(".nav-bar"),s=document.querySelector(".nav-menus"),a=y.offsetWidth-(s.offsetWidth+20);p.style.width=a.toString()+"px"};return(p,y)=>(i(),x(Be(e(c).layout.layoutMode)))}});export{_n as default};
