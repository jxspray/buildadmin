import{h as $,w as A,ar as E,N as R,r as k,q as m,X as h,o as n,O as f,P as d,_,k as y,V,U as w,z as e,m as x,l as C,p as i,$ as T,a8 as j,a9 as q,Z as K,Y as O,W as G}from"./vue-69ad5a16.js";import{w as X,c as Y}from"./index-32d6febb.js";import{F as s}from"./index-4042c46c.js";import{b as c}from"./validate-4db1e214.js";const Z={class:"title"},te=$({__name:"popupForm",setup(H){const b=A(),l=E("baTable"),S=R(),{t}=X(),p=k({groupList:[{name:"通用",width:0,height:0}]});l.after={toggleForm:function(){if(!l.form.operate)return!0;Y({url:"/admin/cms.Slide/edit",method:"get",params:{id:S.query.slide_id}},{showSuccessMessage:!1}).then(g=>{const a=g.data.row.groups;Object.keys(a).forEach(u=>{a[u].width=parseInt(a[u].width),a[u].height=parseInt(a[u].height)}),p.groupList=a,p.groupList.length===0&&(p.groupList=[{name:"通用",width:0,height:0}]);const r=p.groupList[0];l.form.items.group=r.name,l.form.operate=="Add"&&(l.form.items.width=r.width,l.form.items.height=r.height)})}};const U=function(g){const a=p.groupList.find(r=>r.name===g);a&&(l.form.items.width=a.width,l.form.items.height=a.height)},P=k({width:[c({name:"number",title:t("cms.slide.data.width")})],height:[c({name:"number",title:t("cms.slide.data.height")})],create_time:[c({name:"date",title:t("cms.slide.data.create_time")})],update_time:[c({name:"date",title:t("cms.slide.data.update_time")})],delete_time:[c({name:"date",title:t("cms.slide.data.delete_time")})]});return(g,a)=>{const r=m("el-option"),u=m("el-select"),L=m("el-form-item"),F=m("el-form"),I=m("el-scrollbar"),v=m("el-button"),z=m("el-dialog"),N=h("drag"),B=h("zoom"),D=h("loading"),M=h("blur");return n(),f(z,{class:"ba-operate-dialog","close-on-click-modal":!1,"model-value":["Add","Edit"].includes(e(l).form.operate),onClose:e(l).toggleForm,width:"50%"},{header:d(()=>[_((n(),y("div",Z,[V(w(e(l).form.operate?e(t)(e(l).form.operate):""),1)])),[[N,[".ba-operate-dialog",".el-dialog__header"]],[B,".ba-operate-dialog"]])]),footer:d(()=>[x("div",{style:C("width: calc(100% - "+e(l).form.labelWidth/1.8+"px)")},[i(v,{onClick:a[12]||(a[12]=o=>e(l).toggleForm())},{default:d(()=>[V(w(e(t)("Cancel")),1)]),_:1}),_((n(),f(v,{loading:e(l).form.submitLoading,onClick:a[13]||(a[13]=o=>e(l).onSubmit(b.value)),type:"primary"},{default:d(()=>[V(w(e(l).form.operateIds&&e(l).form.operateIds.length>1?e(t)("Save and edit next item"):e(t)("Save")),1)]),_:1},8,["loading"])),[[M]])],4)]),default:d(()=>[_((n(),f(I,{class:"ba-table-form-scrollbar"},{default:d(()=>[x("div",{class:T(["ba-operate-form","ba-"+e(l).form.operate+"-form"]),style:C("width: calc(100% - "+e(l).form.labelWidth/2+"px)")},[e(l).form.loading?G("",!0):(n(),f(F,{key:0,ref_key:"formRef",ref:b,onSubmit:a[10]||(a[10]=j(()=>{},["prevent"])),onKeyup:a[11]||(a[11]=q(o=>e(l).onSubmit(b.value),["enter"])),model:e(l).form.items,"label-position":"right","label-width":e(l).form.labelWidth+"px",rules:P},{default:d(()=>[i(s,{label:e(t)("cms.slide.data.slide_id"),type:"remoteSelect",modelValue:e(l).form.items.slide_id,"onUpdate:modelValue":a[0]||(a[0]=o=>e(l).form.items.slide_id=o),prop:"slide_id","input-attr":{pk:"ba_cms_slide.id",field:"name","remote-url":"/admin/cms.Slide/index"},placeholder:e(t)("Please select field",{field:e(t)("cms.slide.data.slide_id")})},null,8,["label","modelValue","input-attr","placeholder"]),i(s,{label:e(t)("cms.slide.data.title"),type:"string",modelValue:e(l).form.items.title,"onUpdate:modelValue":a[1]||(a[1]=o=>e(l).form.items.title=o),prop:"title",placeholder:e(t)("Please input field",{field:e(t)("cms.slide.data.title")})},null,8,["label","modelValue","placeholder"]),i(s,{label:e(t)("cms.slide.data.image"),type:"image",modelValue:e(l).form.items.image,"onUpdate:modelValue":a[2]||(a[2]=o=>e(l).form.items.image=o),prop:"image"},null,8,["label","modelValue"]),i(s,{label:e(t)("cms.slide.data.link"),type:"string",modelValue:e(l).form.items.link,"onUpdate:modelValue":a[3]||(a[3]=o=>e(l).form.items.link=o),prop:"link",placeholder:e(t)("Please input field",{field:e(t)("cms.slide.data.link")})},null,8,["label","modelValue","placeholder"]),i(s,{label:e(t)("cms.slide.data.remark"),type:"textarea",modelValue:e(l).form.items.remark,"onUpdate:modelValue":a[4]||(a[4]=o=>e(l).form.items.remark=o),prop:"remark",placeholder:e(t)("Please input field",{field:e(t)("cms.slide.data.remark")})},null,8,["label","modelValue","placeholder"]),i(s,{label:e(t)("cms.slide.data.width"),type:"number",prop:"width","input-attr":{step:1},modelValue:e(l).form.items.width,"onUpdate:modelValue":a[5]||(a[5]=o=>e(l).form.items.width=o),modelModifiers:{number:!0},placeholder:e(t)("Please input field",{field:e(t)("cms.slide.data.width")})},null,8,["label","modelValue","placeholder"]),i(s,{label:e(t)("cms.slide.data.height"),type:"number",prop:"height","input-attr":{step:1},modelValue:e(l).form.items.height,"onUpdate:modelValue":a[6]||(a[6]=o=>e(l).form.items.height=o),modelModifiers:{number:!0},placeholder:e(t)("Please input field",{field:e(t)("cms.slide.data.height")})},null,8,["label","modelValue","placeholder"]),i(s,{label:e(t)("cms.slide.data.status"),type:"radio",modelValue:e(l).form.items.status,"onUpdate:modelValue":a[7]||(a[7]=o=>e(l).form.items.status=o),prop:"status",data:{content:{0:e(t)("cms.slide.data.status 0"),1:e(t)("cms.slide.data.status 1")}},placeholder:e(t)("Please select field",{field:e(t)("cms.slide.data.status")})},null,8,["label","modelValue","data","placeholder"]),i(L,{label:e(t)("cms.slide.data.group"),prop:"group"},{default:d(()=>[i(u,{modelValue:e(l).form.items.group,"onUpdate:modelValue":a[8]||(a[8]=o=>e(l).form.items.group=o),clearable:"",placeholder:e(t)("Please input field",{field:e(t)("cms.slide.data.group")}),class:"w100",onChange:U},{default:d(()=>[(n(!0),y(K,null,O(p.groupList,(o,W)=>(n(),f(r,{key:W,label:o.name+":"+o.width+"x"+o.height,value:o.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),i(s,{label:e(t)("cms.slide.data.extends"),type:"string",modelValue:e(l).form.items.extends,"onUpdate:modelValue":a[9]||(a[9]=o=>e(l).form.items.extends=o),prop:"extends",placeholder:e(t)("Please input field",{field:e(t)("cms.slide.data.extends")})},null,8,["label","modelValue","placeholder"])]),_:1},8,["model","label-width","rules"]))],6)]),_:1})),[[D,e(l).form.loading]])]),_:1},8,["model-value","onClose"])}}});export{te as _};
