import{b as f,T as b,a as g}from"./index-afbe03c0.js";import{w as h,a2 as y,a3 as _}from"./index-32d6febb.js";import{s as k,e as T,k as w}from"./crud-7e52b10c.js";import{h as x,r as C,w as B,am as v,E as D,F as V,q as R,o as q,k as E,p as r,P as I,z as o,n as A}from"./vue-69ad5a16.js";import"./index-f98c8d12.js";import"./validate-4db1e214.js";const G=x({__name:"log",props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(d,{emit:l}){const u=d,s=C({ready:!1}),{t:e}=h(),n=B(),i=[{render:"confirmButton",name:"copy",title:"crud.crud.copy",text:"",type:"primary",icon:"fa fa-copy",class:"table-row-copy",popconfirm:{confirmButtonText:e("Confirm"),cancelButtonText:e("Cancel"),confirmButtonType:"primary",title:e("crud.crud.Start CRUD design with this record?"),width:"220px"},disabledTip:!1,click:t=>{k.startData.logId=t[a.table.pk],T("log"),l("update:modelValue",!1)}},{render:"confirmButton",name:"del",title:"Delete",text:"",type:"danger",icon:"fa fa-trash",class:"table-row-delete",popconfirm:{confirmButtonText:e("crud.crud.Delete Code"),cancelButtonText:e("Cancel"),confirmButtonType:"danger",title:e("crud.crud.Are you sure to delete the generated CRUD code?"),width:"248px"},disabledTip:!1,click:t=>{w(t[a.table.pk]).then(()=>{a.onTableHeaderAction("refresh",{})})},display:t=>t.status!="delete"&&y("delete")}],a=new f(new _("/admin/crud.Log/"),{pk:"id",column:[{type:"selection",align:"center",operator:!1},{label:e("crud.log.id"),prop:"id",align:"center",width:70,operator:"RANGE",sortable:"custom"},{label:e("crud.log.table_name"),prop:"table_name",align:"center",operatorPlaceholder:e("Fuzzy query"),operator:"LIKE",sortable:!1},{label:e("crud.log.status"),prop:"status",align:"center",render:"tag",operator:"=",sortable:!1,replaceValue:{delete:e("crud.log.status delete"),success:e("crud.log.status success"),error:e("crud.log.status error"),start:e("crud.log.status start")},custom:{delete:"danger",success:"success",error:"warning",start:""}},{label:e("crud.log.create_time"),prop:"create_time",align:"center",render:"datetime",operator:"RANGE",sortable:"custom",width:160,timeFormat:"yyyy-mm-dd hh:MM:ss"},{label:e("Operate"),align:"center",width:100,render:"buttons",buttons:i,operator:!1}],dblClickNotEditColumn:[void 0]},{defaultItems:{status:"start"}});v("baTable",a);const p=()=>{var t;(t=a.getIndex())==null||t.then(()=>{s.ready=!0})};return D(()=>{a.table.ref=n.value,a.mount()}),V(()=>u.modelValue,t=>{t&&!s.ready&&A(()=>{p()})}),(t,c)=>{const m=R("el-dialog");return q(),E("div",null,[r(m,{onClose:c[0]||(c[0]=F=>l("update:modelValue",!1)),width:"60%","model-value":t.modelValue,class:"ba-crud-log-dialog",title:o(e)("crud.crud.CRUD record"),"append-to-body":!0,"destroy-on-close":!0},{default:I(()=>[r(b,{buttons:["refresh","quickSearch","columnDisplay"],"quick-search-placeholder":o(e)("Quick search placeholder",{fields:o(e)("crud.log.quick Search Fields")})},null,8,["quick-search-placeholder"]),r(g,{ref_key:"tableRef",ref:n},null,512)]),_:1},8,["model-value","title"])])}}});export{G as default};
